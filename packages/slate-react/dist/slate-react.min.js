!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("slate"),require("immutable"),require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","slate","immutable","react","react-dom"],t):t(e.SlateReact={},e.Slate,e.Immutable,e.React,e.ReactDOM)}(this,function(e,t,n,r,o){"use strict";var a="default"in n?n.default:n;r=r&&r.hasOwnProperty("default")?r.default:r;var i="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}var u=s,l=c;function d(e){if(u===setTimeout)return setTimeout(e,0);if((u===s||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}"function"==typeof i.setTimeout&&(u=setTimeout),"function"==typeof i.clearTimeout&&(l=clearTimeout);var f,p=[],v=!1,h=-1;function m(){v&&f&&(v=!1,f.length?p=f.concat(p):h=-1,p.length&&y())}function y(){if(!v){var e=d(m);v=!0;for(var t=p.length;t;){for(f=p,p=[];++h<t;)f&&f[h].run();h=-1,t=p.length}f=null,v=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===c||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}g.prototype.run=function(){this.fun.apply(null,this.array)};function b(){}var k=b,C=b,w=b,x=b,S=b,O=b,E=b;var T=i.performance||{},F=T.now||T.mozNow||T.msNow||T.oNow||T.webkitNow||function(){return(new Date).getTime()};var N=new Date;var D={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new g(e,t)),1!==p.length||v||d(y)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:k,addListener:C,once:w,off:x,removeListener:S,removeAllListeners:O,emit:E,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*F.call(T),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-N)/1e3}},R="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function A(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function j(e,t){return e(t={exports:{}},t.exports),t.exports}var M=1e3,B=60*M,P=60*B,I=24*P,L=7*I,_=365.25*I,q=function(e,t){t=t||{};var n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*_;case"weeks":case"week":case"w":return n*L;case"days":case"day":case"d":return n*I;case"hours":case"hour":case"hrs":case"hr":case"h":return n*P;case"minutes":case"minute":case"mins":case"min":case"m":return n*B;case"seconds":case"second":case"secs":case"sec":case"s":return n*M;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=I)return z(e,t,I,"day");if(t>=P)return z(e,t,P,"hour");if(t>=B)return z(e,t,B,"minute");if(t>=M)return z(e,t,M,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=I)return Math.round(e/I)+"d";if(t>=P)return Math.round(e/P)+"h";if(t>=B)return Math.round(e/B)+"m";if(t>=M)return Math.round(e/M)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function z(e,t,n,r){var o=t>=1.5*n;return Math.round(e/n)+" "+r+(o?"s":"")}var W=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var a;function i(){if(i.enabled){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i,s=Number(new Date),c=s-(a||s);o.diff=c,o.prev=a,o.curr=s,a=s,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return e;u++;var a=n.formatters[r];if("function"==typeof a){var i=t[u];e=a.call(o,i),t.splice(u,1),u--}return e}),n.formatArgs.call(o,t),(o.log||n.log).apply(o,t)}}return i.namespace=e,i.enabled=n.enabled(e),i.useColors=n.useColors(),i.color=t(e),i.destroy=r,i.extend=o,"function"==typeof n.init&&n.init(i),n.instances.push(i),i}function r(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var a=n.instances[t];a.enabled=n.enabled(a.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=q,Object.keys(e).forEach(function(t){n[t]=e[t]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n},V=j(function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(o=++r)}),t.splice(o,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==D&&"env"in D&&(e=D.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=W(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});V.log,V.formatArgs,V.save,V.load,V.useColors,V.storage,V.colors;function U(e,t){function n(n,r,o,a,i){var s=r[o];return null!=s||n?null==s&&n?new Error("The "+i+" `"+o+"` is marked as required in `"+a+"`, but it was not supplied."):t(s)?null:new Error("Invalid "+i+" `"+o+"` supplied to `"+a+"`, expected a Slate `"+e+"` but received: "+s):null}function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!1].concat(t))}return r.isRequired=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[!0].concat(t))},r}var $={block:U("Block",function(e){return t.Block.isBlock(e)}),blocks:U("List<Block>",function(e){return t.Block.isBlockList(e)}),change:U("Change",function(e){return t.Change.isChange(e)}),data:U("Data",function(e){return t.Data.isData(e)}),document:U("Document",function(e){return t.Document.isDocument(e)}),history:U("History",function(e){return t.History.isHistory(e)}),inline:U("Inline",function(e){return t.Inline.isInline(e)}),inlines:U("Inline",function(e){return t.Inline.isInlineList(e)}),leaf:U("Leaf",function(e){return t.Leaf.isLeaf(e)}),leaves:U("List<Leaf>",function(e){return t.Leaf.isLeafList(e)}),mark:U("Mark",function(e){return t.Mark.isMark(e)}),marks:U("Set<Mark>",function(e){return t.Mark.isMarkSet(e)}),node:U("Node",function(e){return t.Node.isNode(e)}),nodes:U("List<Node>",function(e){return t.Node.isNodeList(e)}),range:U("Range",function(e){return t.Range.isRange(e)}),ranges:U("List<Range>",function(e){return t.Range.isRangeList(e)}),schema:U("Schema",function(e){return t.Schema.isSchema(e)}),stack:U("Stack",function(e){return t.Stack.isStack(e)}),value:U("Value",function(e){return t.Value.isValue(e)}),text:U("Text",function(e){return t.Text.isText(e)}),texts:U("List<Text>",function(e){return t.Text.isTextList(e)})},H=j(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116;function m(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case a:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case c:return e;default:return t}}case h:case v:case o:return t}}}function y(e){return m(e)===d}t.typeOf=m,t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=h,t.Memo=v,t.Portal=o,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===s||e===i||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===v||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f)},t.isAsyncMode=function(e){return y(e)||m(e)===l},t.isConcurrentMode=y,t.isContextConsumer=function(e){return m(e)===u},t.isContextProvider=function(e){return m(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return m(e)===f},t.isFragment=function(e){return m(e)===a},t.isLazy=function(e){return m(e)===h},t.isMemo=function(e){return m(e)===v},t.isPortal=function(e){return m(e)===o},t.isProfiler=function(e){return m(e)===s},t.isStrictMode=function(e){return m(e)===i},t.isSuspense=function(e){return m(e)===p}});A(H);H.typeOf,H.AsyncMode,H.ConcurrentMode,H.ContextConsumer,H.ContextProvider,H.Element,H.ForwardRef,H.Fragment,H.Lazy,H.Memo,H.Portal,H.Profiler,H.StrictMode,H.Suspense,H.isValidElementType,H.isAsyncMode,H.isConcurrentMode,H.isContextConsumer,H.isContextProvider,H.isElement,H.isForwardRef,H.isFragment,H.isLazy,H.isMemo,H.isPortal,H.isProfiler,H.isStrictMode,H.isSuspense;var K=j(function(e,t){});A(K);K.typeOf,K.AsyncMode,K.ConcurrentMode,K.ContextConsumer,K.ContextProvider,K.Element,K.ForwardRef,K.Fragment,K.Lazy,K.Memo,K.Portal,K.Profiler,K.StrictMode,K.Suspense,K.isValidElementType,K.isAsyncMode,K.isConcurrentMode,K.isContextConsumer,K.isContextProvider,K.isElement,K.isForwardRef,K.isFragment,K.isLazy,K.isMemo,K.isPortal,K.isProfiler,K.isStrictMode,K.isSuspense,j(function(e){e.exports=H});var J=Object.getOwnPropertySymbols,X=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var Y="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function Z(){}function Q(){}Q.resetWarningCache=Z;var ee=j(function(e){e.exports=function(){function e(e,t,n,r,o,a){if(a!==Y){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Q,resetWarningCache:Z};return n.PropTypes=n,n}()});function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e){var n=console.warn||console.log;n("Warning: "+t)}}var ne=function(e,t){return e===t};function re(e,t){var n;void 0===t&&(t=ne);var r,o=[],a=!1,i=function(e,n){return t(e,o[n])};return function(){for(var t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return a&&n===this&&s.length===o.length&&s.every(i)?r:(r=e.apply(this,s),a=!0,n=this,o=s,r)}}var oe=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onPaste","onSelect"],ae=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ie=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),se=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},le=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},de=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),fe=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},pe=[].concat(fe(oe),["decorateNode","onChange","renderEditor","renderMark","renderNode","renderPlaceholder","renderPortal","schema","validateNode"]),ve=self.atob.bind(self),he=self.btoa.bind(self);function me(e){var t=JSON.stringify(e);return he(encodeURIComponent(t))}function ye(e){var t=decodeURIComponent(ve(e));return JSON.parse(t)}var ge={deserialize:function(e,n){var r=ye(e);return t.Value.fromJSON(r,n)},deserializeNode:function(e,n){var r=ye(e);return t.Node.fromJSON(r,n)},serialize:function(e,t){return me(e.toJSON(t))},serializeNode:function(e,t){return me(e.toJSON(t))}},be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ke(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delimiter,r=void 0===n?"\n":n;return"document"==e.object||"block"==e.object&&t.Block.isBlockList(e.nodes)?e.nodes.map(ke).join(r):e.text}var Ce={deserialize:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.defaultBlock,a=void 0===o?"line":o,i=r.defaultMarks,s=void 0===i?[]:i,c=r.delimiter,u=void 0===c?"\n":c,l=r.toJSON,d=void 0!==l&&l;n.Set.isSet(s)&&(s=s.toArray()),a=t.Node.createProperties(a),s=s.map(t.Mark.createProperties);var f={object:"value",document:{object:"document",data:{},nodes:e.split(u).map(function(e){return be({},a,{object:"block",data:{},nodes:[{object:"text",leaves:[{object:"leaf",text:e,marks:s}]}]})})}};return d?f:t.Value.fromJSON(f)},serialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ke(e.document,t)}},we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe="object"===("undefined"==typeof window?"undefined":we(window))&&"object"===("undefined"==typeof document?"undefined":we(document))&&9===document.nodeType,Se=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Oe=void 0;if(xe){var Ee=!0,Te=!1,Fe=void 0;try{for(var Ne,De=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(Ee=(Ne=De.next()).done);Ee=!0){var Re=Se(Ne.value,2),Ae=Re[0];if(Re[1].test(window.navigator.userAgent)){Oe=Ae;break}}}catch(e){Te=!0,Fe=e}finally{try{!Ee&&De.return&&De.return()}finally{if(Te)throw Fe}}}var je=void 0;if(xe){var Me=!0,Be=!1,Pe=void 0;try{for(var Ie,Le=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(Me=(Ie=Le.next()).done);Me=!0){var _e=Se(Ie.value,2),qe=_e[0];if(_e[1].test(window.navigator.userAgent)){je=qe;break}}}catch(e){Be=!0,Pe=e}finally{try{!Me&&Le.return&&Le.return()}finally{if(Be)throw Pe}}}var ze=[];if(xe){var We=!0,Ve=!1,Ue=void 0;try{for(var $e,He=[["inputeventslevel1",function(e){return"inputType"in(e.InputEvent?new e.InputEvent("input"):{})}],["inputeventslevel2",function(e){var t=e.document.createElement("div");return t.contentEditable=!0,"onbeforeinput"in t}]][Symbol.iterator]();!(We=($e=He.next()).done);We=!0){var Ke=Se($e.value,2),Je=Ke[0];(0,Ke[1])(window)&&ze.push(Je)}}catch(e){Ve=!0,Ue=e}finally{try{!We&&He.return&&He.return()}finally{if(Ve)throw Ue}}}var Xe="firefox"===Oe,Ge="safari"===Oe,Ye="ie"===Oe,Ze="edge"===Oe,Qe="ios"===je,et="macos"===je,tt=(ze.includes("inputeventslevel1"),ze.includes("inputeventslevel2")),nt=function e(t){if(ot(t))return t;if(ot(t.ownerDocument))return t.ownerDocument;if(ot(t.document))return t.document;if(t.parentNode)return e(t.parentNode);if(t.commonAncestorContainer)return e(t.commonAncestorContainer);if(t.startContainer)return e(t.startContainer);if(t.anchorNode)return e(t.anchorNode)},rt=9;function ot(e){return e&&e.nodeType===rt}var at=!!document.attachEvent&&window!==document.parentWindow,it=function(e){if(t=e,t&&t.window===t)return e;var t;var n=nt(e);if(at){n.parentWindow.execScript("document._parentWindow = window;","Javascript");var r=n._parentWindow;return n._parentWindow=null,r}return n.defaultView||n.parentWindow};var st=j(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});for(var n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},r={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:"undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=1;a<20;a++)o["f"+a]=111+a;function i(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return s(e,t)}),o=function(e){return r.some(function(t){return c(t,e)})};return null==n?o:o(n)}function s(e,t){var r=t&&t.byKey,o={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var s in n)o[n[s]]=!1;var c=!0,d=!1,f=void 0;try{for(var p,v=a[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var h=p.value,m=h.endsWith("?");m&&(h=h.slice(0,-1));var y=l(h),g=n[y];1!==i&&g||(r?o.key=y:o.which=u(h)),g&&(o[g]=!m||null)}}catch(e){d=!0,f=e}finally{try{!c&&v.return&&v.return()}finally{if(d)throw f}}return o}function c(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&((null!=(o="key"===n?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r))return!1}return!0}function u(e){return e=l(e),o[e]||e.toUpperCase().charCodeAt(0)}function l(e){return e=e.toLowerCase(),e=r[e]||e}t.default=i,t.isHotkey=i,t.isCodeHotkey=function(e,t){return i(e,t)},t.isKeyHotkey=function(e,t){return i(e,{byKey:!0},t)},t.parseHotkey=s,t.compareHotkey=c,t.toKeyCode=u,t.toKeyName=l});A(st);st.isHotkey,st.isCodeHotkey;var ct=st.isKeyHotkey,ut=(st.parseHotkey,st.compareHotkey,st.toKeyCode,st.toKeyName,{bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"}),lt={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},dt={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:"ctrl+y"},ft={},pt=Qe||et,vt=!pt;[].concat(Object.keys(ut)).concat(Object.keys(lt)).concat(Object.keys(dt)).forEach(function(e){var t="is"+e[0].toUpperCase()+e.slice(1);if(!ft[t]){var n=ut[e],r=lt[e],o=dt[e],a=n&&ct(n),i=r&&ct(r),s=o&&ct(o);ft[t]=function(e){return!(!a||!a(e))||(!!(pt&&i&&i(e))||!!(vt&&s&&s(e)))}}});var ht=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},mt="object"==typeof R&&R&&R.Object===Object&&R,yt="object"==typeof self&&self&&self.Object===Object&&self,gt=mt||yt||Function("return this")(),bt=function(){return gt.Date.now()},kt=gt.Symbol,Ct=Object.prototype,wt=Ct.hasOwnProperty,xt=Ct.toString,St=kt?kt.toStringTag:void 0;var Ot=function(e){var t=wt.call(e,St),n=e[St];try{e[St]=void 0;var r=!0}catch(e){}var o=xt.call(e);return r&&(t?e[St]=n:delete e[St]),o},Et=Object.prototype.toString;var Tt=function(e){return Et.call(e)},Ft="[object Null]",Nt="[object Undefined]",Dt=kt?kt.toStringTag:void 0;var Rt=function(e){return null==e?void 0===e?Nt:Ft:Dt&&Dt in Object(e)?Ot(e):Tt(e)};var At=function(e){return null!=e&&"object"==typeof e},jt="[object Symbol]";var Mt=function(e){return"symbol"==typeof e||At(e)&&Rt(e)==jt},Bt=NaN,Pt=/^\s+|\s+$/g,It=/^[-+]0x[0-9a-f]+$/i,Lt=/^0b[01]+$/i,_t=/^0o[0-7]+$/i,qt=parseInt;var zt=function(e){if("number"==typeof e)return e;if(Mt(e))return Bt;if(ht(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ht(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Pt,"");var n=Lt.test(e);return n||_t.test(e)?qt(e.slice(2),n?2:8):It.test(e)?Bt:+e},Wt="Expected a function",Vt=Math.max,Ut=Math.min;var $t=function(e,t,n){var r,o,a,i,s,c,u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(Wt);function p(t){var n=r,a=o;return r=o=void 0,u=t,i=e.apply(a,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=a}function h(){var e=bt();if(v(e))return m(e);s=setTimeout(h,function(e){var n=t-(e-c);return d?Ut(n,a-(e-u)):n}(e))}function m(e){return s=void 0,f&&r?p(e):(r=o=void 0,i)}function y(){var e=bt(),n=v(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(h,t),l?p(e):i}(c);if(d)return s=setTimeout(h,t),p(c)}return void 0===s&&(s=setTimeout(h,t)),i}return t=zt(t)||0,ht(n)&&(l=!!n.leading,a=(d="maxWait"in n)?Vt(zt(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=o=s=void 0},y.flush=function(){return void 0===s?i:m(bt())},y},Ht="Expected a function";var Kt=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(Ht);return ht(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),$t(e,t,{leading:r,maxWait:t,trailing:o})},Jt="<<anonymous>>";function Xt(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof a.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function Gt(e){function t(t,n,r,o,a,i){for(var s=arguments.length,c=Array(s>6?s-6:0),u=6;u<s;u++)c[u-6]=arguments[u];return i=i||r,o=o||Jt,null!=n[r]?e.apply(void 0,[n,r,o,a,i].concat(c)):t?new Error("Required "+a+" `"+i+"` was not specified in `"+o+"`."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function Yt(e,t){return Gt(function(n,r,o,a,i){var s=n[r];if(!t(s)){var c=Xt(s);return new Error("Invalid "+a+" `"+i+"` of type `"+c+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function Zt(e,t,n){return Gt(function(r,o,a,i,s){for(var c=arguments.length,u=Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];var d=r[o];if(!n(d)){var f=i,p=Xt(d);return new Error("Invalid "+f+" `"+s+"` of type `"+p+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+s+"`, expected a function.");for(var v=d.toArray(),h=0,m=v.length;h<m;h++){var y=e.apply(void 0,[v,h,a,i,s+"["+h+"]"].concat(u));if(y instanceof Error)return y}})}function Qt(e,t,n,r){return Gt(function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return Zt(e,n,r).apply(void 0,a)||t&&(s=t,Gt(function(e,t,n,r,o){for(var a=arguments.length,i=Array(a>5?a-5:0),c=5;c<a;c++)i[c-5]=arguments[c];var u=e[t];if("function"!=typeof s)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+o+"`, expected a function.");for(var l=u.keySeq().toArray(),d=0,f=l.length;d<f;d++){var p=s.apply(void 0,[l,d,n,r,o+" -> key("+l[d]+")"].concat(i));if(p instanceof Error)return p}})).apply(void 0,a);var s})}function en(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?a.Iterable.isIterable:arguments[2];return Gt(function(r,o,a,i,s){for(var c=arguments.length,u=Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];var d=r[o];if(!n(d)){var f=Xt(d);return new Error("Invalid "+i+" `"+s+"` of type `"+f+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var p=d.toObject();for(var v in e){var h=e[v];if(h){var m=h.apply(void 0,[p,v,a,i,s+"."+v].concat(u));if(m)return m}}})}function tn(e){return en(e)}var nn={listOf:function(e){return Zt(e,"List",a.List.isList)},mapOf:function(e,t){return Qt(e,t,"Map",a.Map.isMap)},orderedMapOf:function(e,t){return Qt(e,t,"OrderedMap",a.OrderedMap.isOrderedMap)},setOf:function(e){return Zt(e,"Set",a.Set.isSet)},orderedSetOf:function(e){return Zt(e,"OrderedSet",a.OrderedSet.isOrderedSet)},stackOf:function(e){return Zt(e,"Stack",a.Stack.isStack)},iterableOf:function(e){return Zt(e,"Iterable",a.Iterable.isIterable)},recordOf:function(e){return Gt(function(t,n,r,o,i){for(var s=arguments.length,c=Array(s>5?s-5:0),u=5;u<s;u++)c[u-5]=arguments[u];var l=t[n];if(!(l instanceof a.Record)){var d=Xt(l),f=o;return new Error("Invalid "+f+" `"+i+"` of type `"+d+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var p in e){var v=e[p];if(v){var h=l.toObject(),m=v.apply(void 0,[h,p,r,o,i+"."+p].concat(c));if(m)return m}}})},shape:tn,contains:tn,mapContains:function(e){return en(e,"Map",a.Map.isMap)},list:Yt("List",a.List.isList),map:Yt("Map",a.Map.isMap),orderedMap:Yt("OrderedMap",a.OrderedMap.isOrderedMap),set:Yt("Set",a.Set.isSet),orderedSet:Yt("OrderedSet",a.OrderedSet.isOrderedSet),stack:Yt("Stack",a.Stack.isStack),seq:Yt("Seq",a.Seq.isSeq),record:Yt("Record",function(e){return e instanceof a.Record}),iterable:Yt("Iterable",a.Iterable.isIterable)},rn=/^([\w-]+)(?::(\d+))?$/;var on={parse:function(e){var t=rn.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=de(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},an=V("slate:leaves"),sn=function(e){function t(){var e,n,r;ae(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),cn.call(r),le(r,n)}return ue(t,e),ie(t,[{key:"shouldComponentUpdate",value:function(e){return e.index!=this.props.index||e.marks!=this.props.marks||e.text!=this.props.text||e.parent!=this.props.parent}},{key:"render",value:function(){this.debug("render",this);var e=this.props,t=e.node,n=e.index,o=on.stringify({key:t.key,index:n});return r.createElement("span",{"data-offset-key":o},this.renderMarks())}},{key:"renderMarks",value:function(){var e=this.props,t=e.marks,n=e.node,r=e.offset,o=e.text,a=e.editor,i=a.stack,s=this.renderText(),c={"data-slate-leaf":!0};return t.reduce(function(e,s){var u={editor:a,mark:s,marks:t,node:n,offset:r,text:o,children:e,attributes:c};return i.find("renderMark",u)||e},s)}},{key:"renderText",value:function(){var e=this.props,t=e.block,n=e.node,o=e.editor,a=e.parent,i=e.text,s=e.index,c=e.leaves;if(o.value.schema.isVoid(a))return r.createElement("span",{"data-slate-zero-width":"z"},"​");if(""===i&&"block"===a.object&&""===a.text&&a.nodes.last()===n)return r.createElement("span",{"data-slate-zero-width":"n"},"​");if(""===i)return r.createElement("span",{"data-slate-zero-width":"z"},"​");var u=t.getLastText(),l=i.charAt(i.length-1),d=n===u,f=s===c.size-1;return d&&f&&"\n"===l?i+"\n":i}}]),t}(r.Component);sn.propTypes={block:$.block.isRequired,editor:ee.object.isRequired,index:ee.number.isRequired,leaves:$.leaves.isRequired,marks:$.marks.isRequired,node:$.node.isRequired,offset:ee.number.isRequired,parent:$.node.isRequired,text:ee.string.isRequired};var cn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];an.apply(void 0,[t,e.props.node.key+"-"+e.props.index].concat(r))}},un=V("slate:node"),ln=function(e){function n(){var e,t,r;ae(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=le(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),dn.call(r),le(r,t)}return ue(n,e),ie(n,[{key:"render",value:function(){var e=this;this.debug("render",this);var n=this.props,o=n.decorations,a=n.editor,i=n.node,s=n.style,c=a.value.document,u=i.key,l=o.filter(function(e){var n=e.start,r=e.end;if(n.key===u||r.key===u)return!0;if(n.key===r.key)return!1;var o=c.assertPath(u);return-1!==t.PathUtils.compare(o,n.path)&&1!==t.PathUtils.compare(o,r.path)}),d=0===l.size?i.getLeaves():i.getLeaves(l),f=0,p=d.map(function(t,n){var r=e.renderLeaf(d,t,n,f);return f+=t.text.length,r});return r.createElement("span",{"data-key":u,style:s},p)}}]),n}(r.Component);ln.propTypes={block:$.block,decorations:nn.list.isRequired,editor:ee.object.isRequired,node:$.node.isRequired,parent:$.node.isRequired,style:ee.object},ln.defaultProps={style:null};var dn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node.key;un.apply(void 0,[t,a+" (text)"].concat(r))},this.shouldComponentUpdate=function(t){var n=t,r=e.props;if(n.node!=r.node)return!0;if("block"==n.parent.object){var o=r.parent.nodes.last(),a=n.parent.nodes.last();if(r.node==o&&n.node!=a)return!0}return!n.decorations.equals(r.decorations)},this.renderLeaf=function(t,n,o,a){var i=e.props,s=i.block,c=i.node,u=i.parent,l=i.editor,d=n.text,f=n.marks;return r.createElement(sn,{key:c.key+"-"+o,block:s,editor:l,index:o,marks:f,node:c,offset:a,parent:u,leaves:t,text:d})}},fn=V("slate:void"),pn=function(e){function t(){var e,n,r;ae(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),vn.call(r),le(r,n)}return ue(t,e),ie(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.node,o=e.readOnly,a="block"==n.object?"div":"span",i=r.createElement(a,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText()),s=r.createElement(a,{contentEditable:!!o&&null},t);return this.debug("render",{props:e}),r.createElement(a,{"data-slate-void":!0,"data-key":n.key,contentEditable:!(!o&&"block"!=n.object)&&null},o?null:i,s)}}]),t}(r.Component);pn.propTypes={block:$.block,children:ee.any.isRequired,editor:ee.object.isRequired,node:$.node.isRequired,parent:$.node.isRequired,readOnly:ee.bool.isRequired};var vn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";fn.apply(void 0,[t,""+i].concat(r))},this.renderText=function(){var t=e.props,n=t.block,o=t.decorations,a=t.node,i=t.readOnly,s=t.editor,c=a.getFirstText();return r.createElement(ln,{block:"block"==a.object?a:n,decorations:o,editor:s,key:c.key,node:c,parent:a,readOnly:i})}};function hn(e,t){var r=n.Set().asMutable(),o=[];return function(e,t){if(t.isEmpty())return e.nodes.toArray().map(function(e,t){return{child:e,index:t}});var n=se({},e.key,0),r=1;e.forEachDescendant(function(e){n[e.key]=r,r+=1});var o=e.nodes.toArray(),a=o.map(function(e,t){return{child:e,index:t,order:n[e.key]}});return t.forEach(function(e){var t=n[e.start.key],i=void 0===t?0:function(e,t,n){var r=e.findIndex(function(e){return n<t[e.key]});if(r<=0)return 0;var o=e[r-1];return t[o.key]}(o,n,t);a.push({isRangeStart:!0,order:i-.5,decoration:e});var s=(n[e.end.key]||r)+.5;a.push({isRangeEnd:!0,order:s,decoration:e})}),a.sort(function(e,t){return e.order>t.order?1:-1})}(e,t).forEach(function(e){e.isRangeStart?r.add(e.decoration):e.isRangeEnd?r.remove(e.decoration):o.push(r.toList())}),o}var mn=V("slate:node"),yn=function(e){function t(){var e,n,r;ae(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),gn.call(r),le(r,n)}return ue(t,e),ie(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.stack.find("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(n)return!0;te(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!=o.readOnly||(r.node!=o.node||(!(!r.isSelected&&!o.isSelected)||(!(!r.isFocused&&!o.isFocused)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e=this;this.debug("render",this);var t=this.props,n=t.editor,o=t.isSelected,a=t.isFocused,i=t.node,s=t.decorations,c=t.parent,u=t.readOnly,l=n.value,d=l.selection,f=l.schema,p=n.stack,v=i.getSelectionIndexes(d,o),h=hn(i,s.concat(i.getDecorations(p))),m=[];i.nodes.forEach(function(t,n){var r=!!v&&v.start<=n&&n<v.end;m.push(e.renderNode(t,r,h[n]))});var y={"data-key":i.key};"block"==i.object&&"block"!=i.nodes.first().object&&("rtl"==i.getTextDirection()&&(y.dir="rtl"));var g={key:i.key,editor:n,isFocused:a,isSelected:o,node:i,parent:c,readOnly:u},b=p.find("renderPlaceholder",g);b&&(b=r.cloneElement(b,{key:i.key+"-placeholder"}),m=[b].concat(fe(m)));var k=p.find("renderNode",ce({},g,{attributes:y,children:m}));return f.isVoid(i)?r.createElement(pn,this.props,k):k}}]),t}(r.Component);yn.propTypes={block:$.block,decorations:nn.list.isRequired,editor:ee.object.isRequired,isFocused:ee.bool.isRequired,isSelected:ee.bool.isRequired,node:$.node.isRequired,parent:$.node.isRequired,readOnly:ee.bool.isRequired};var gn=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;mn.apply(void 0,[t,i+" ("+s+")"].concat(r))},this.renderNode=function(t,n,o){var a=e.props,i=a.block,s=a.editor,c=a.node,u=a.readOnly,l=a.isFocused,d="text"==t.object?ln:yn;return r.createElement(d,{block:"block"==c.object?c:i,decorations:o,editor:s,isSelected:n,isFocused:l&&n,key:t.key,node:t,parent:c,readOnly:u})}};function bn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;t.Node.isNode(e)&&(e=e.key);var r=n.document.querySelector('[data-key="'+e+'"]');if(!r)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return r}function kn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=bn(e.key,t),r=0,o=void 0,a=t.document.createNodeIterator(n,NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1);o=a.nextNode();){var i=r+o.textContent.length;if(e.offset<=i){var s=e.offset-r;return{node:o,offset:s>=0?s:0}}r=i}return null}function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.anchor,r=e.focus,o=e.isBackward,a=e.isCollapsed,i=kn(n,t),s=a?i:kn(r,t);if(!i||!s)return null;var c=t.document.createRange(),u=o?s:i,l=o?i:s;return c.setStart(u.node,u.offset),c.setEnd(l.node,l.offset),c}var wn="data-slate-zero-width",xn="["+wn+"]",Sn="data-offset-key",On="["+Sn+"]",En="[data-key]",Tn="[data-slate-void]";function Fn(e,t,n){var r=function(e,t){if(1==e.nodeType&&e.childNodes.length){var n=t==e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=Nn(e,o,r);1==e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=Nn(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,t),o=r.node,a=r.offset,i=it(e),s=o.parentNode,c=s.closest(On),u=void 0,l=void 0;if(c){var d=i.document.createRange(),f=c.closest(En);d.setStart(f,0),d.setEnd(o,a),l=f,u=d.toString().length}else{var p=s.closest(Tn);if(!p)return null;if(!(c=p.querySelector(On)))return null;u=(l=c).textContent.length}u==l.textContent.length&&s.hasAttribute(wn)&&u--;var v=c.getAttribute(Sn);if(!v)return null;var h=on.parse(v).key;return n.document.hasDescendant(h)?n.document.createPoint({key:h,offset:u}):null}function Nn(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8==o.nodeType||1==o.nodeType&&0==o.childNodes.length||1==o.nodeType&&"false"==o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"==n&&a++,"backward"==n&&a--);return o||null}function Dn(e,t){var n=e.anchorNode||e.startContainer;if(!n)return null;var r=it(n);(e instanceof r.Range||r.StaticRange&&e instanceof r.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var o=e,a=o.anchorNode,i=o.anchorOffset,s=o.focusNode,c=o.focusOffset,u=o.isCollapsed,l=Fn(a,i,t),d=u?l:Fn(s,c,t);if(!l||!d)return null;if(Ye||Ze){var f=kn(l),p=kn(d);e={anchorNode:f.node,anchorOffset:f.offset,focusNode:p.node,focusOffset:p.offset}}return t.document.createRange({anchor:l,focus:d})}var Rn=function(e){var t=e.anchorNode,n=e.anchorOffset,r=e.focusNode,o=e.focusOffset,a=t.compareDocumentPosition(r);return!(4===a||0===a&&n<o)},An=["auto","overlay","scroll"],jn=Qe&&!!window.navigator.userAgent.match(/os 11_/i);function Mn(e){if(!jn&&e.anchorNode){var t=it(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(An.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n==t.document.body||n==t.document.documentElement,o=Rn(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();Ge&&a.collapsed&&0==i.top&&0==i.height&&(0==a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0==(i=a.getBoundingClientRect()).top&&0==i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var s=void 0,c=void 0,u=void 0,l=void 0,d=0,f=0,p=0,v=0,h=0,m=0,y=0,g=0;if(r){s=t.innerWidth,c=t.innerHeight,u=t.pageYOffset,l=t.pageXOffset}else{var b=n.offsetWidth,k=n.offsetHeight,C=n.scrollTop,w=n.scrollLeft,x=t.getComputedStyle(n),S=x.borderTopWidth,O=x.borderBottomWidth,E=x.borderLeftWidth,T=x.borderRightWidth,F=x.paddingTop,N=x.paddingBottom,D=x.paddingLeft,R=x.paddingRight,A=n.getBoundingClientRect();s=b,c=k,d=A.top+parseInt(S,10),f=A.left+parseInt(E,10),p=parseInt(S,10)+parseInt(O,10),v=parseInt(E,10)+parseInt(T,10),h=parseInt(F,10),m=parseInt(N,10),y=parseInt(D,10),g=parseInt(R,10),u=C,l=w}var j=i.top+u-d,M=i.left+l-f,B=l,P=u;M<l?B=M-y:M+i.width+v>l+s&&(B=M+v+g-s),j<u?P=j-h:j+i.height+p>u+c&&(P=j+p+m+i.height-c),r?t.scrollTo(B,P):(n.scrollTop=P,n.scrollLeft=B)}}function Bn(e){var t=window.document;if(t&&t.body.createTextRange){var n=t.body.createTextRange();n.collapse(),n.select()}else e.removeAllRanges()}var Pn=/Permission denied to access property "nodeType"/,In=V("slate:content"),Ln=function(e){function t(){var e,n,o;ae(this,t);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return n=o=le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),o.tmp={isUpdatingSelection:!1},o.handlers=oe.reduce(function(e,t){return e[t]=function(e){return o.onEvent(t,e)},e},{}),o.updateSelection=function(){var e=o.props.editor.value.selection,t=e.isBackward,n=it(o.element),r=n.getSelection();if(r){var a=r.rangeCount,i=r.anchorNode;if(a||!e.isBlurred){if(e.isBlurred){if(!o.isInEditor(i))return;return Bn(r),o.element.blur(),void In("updateSelection",{selection:e,native:r})}if(!e.isUnset){var s=!!a&&r.getRangeAt(0),c=Cn(e,n);if(c){var u=c.startContainer,l=c.startOffset,d=c.endContainer,f=c.endOffset;s&&(u==s.startContainer&&l==s.startOffset&&d==s.endContainer&&f==s.endOffset||u==s.endContainer&&l==s.endOffset&&d==s.startContainer&&f==s.startOffset)||(o.tmp.isUpdatingSelection=!0,Bn(r),r.setBaseAndExtent?t?r.setBaseAndExtent(c.endContainer,c.endOffset,c.startContainer,c.startOffset):r.setBaseAndExtent(c.startContainer,c.startOffset,c.endContainer,c.endOffset):r.addRange(c),Mn(r),setTimeout(function(){Xe&&o.element&&o.element.focus(),o.tmp.isUpdatingSelection=!1}),In("updateSelection",{selection:e,native:r}))}else te(!1,"Unable to find a native DOM range from the current selection.")}}}},o.ref=function(e){o.element=e},o.isInEditor=function(e){var t=o.element,n=void 0;try{n=3===e.nodeType?e.parentNode:e}catch(e){if(Xe&&Pn.test(e.message))return!1;throw e}return n.isContentEditable&&(n===t||n.closest("[data-slate-editor]")===t)},o.onNativeSelectionChange=Kt(function(e){o.props.readOnly||it(e.target).document.activeElement===o.element&&o.props.onSelect(e)},100),o.renderNode=function(e,t,n){var a=o.props,i=a.editor,s=a.readOnly,c=i.value,u=c.document,l=c.selection.isFocused;return r.createElement(yn,{block:null,editor:i,decorations:n,isSelected:t,isFocused:l&&t,key:e.key,node:e,parent:u,readOnly:s})},le(o,n)}return ue(t,e),ie(t,[{key:"componentDidMount",value:function(){it(this.element).document.addEventListener("selectionchange",this.onNativeSelectionChange),tt&&this.element.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection()}},{key:"componentWillUnmount",value:function(){var e=it(this.element);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),tt&&this.element.removeEventListener("beforeinput",this.handlers.onBeforeInput)}},{key:"componentDidUpdate",value:function(){this.updateSelection()}},{key:"onEvent",value:function(e,t){if(In("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!=e&&"onBlur"!=e&&"onFocus"!=e){if("onSelect"==e){var n=this.props.editor.value,r=n.selection,o=Dn(it(t.target).getSelection(),n);if(o&&o.equals(r.toRange()))return void this.updateSelection()}if("onDragEnd"==e||"onDragEnter"==e||"onDragExit"==e||"onDragLeave"==e||"onDragOver"==e||"onDragStart"==e||"onDrop"==e)if(t.target.closest("[data-slate-editor]")!==this.element)return;("onBeforeInput"!=e&&"onBlur"!=e&&"onCompositionEnd"!=e&&"onCompositionStart"!=e&&"onCopy"!=e&&"onCut"!=e&&"onFocus"!=e&&"onInput"!=e&&"onKeyDown"!=e&&"onKeyUp"!=e&&"onPaste"!=e&&"onSelect"!=e||this.isInEditor(t.target))&&this.props[e](t)}}},{key:"render",value:function(){var e=this,t=this.props,n=this.handlers,o=t.className,a=t.readOnly,i=t.editor,s=t.tabIndex,c=t.role,u=t.tagName,l=t.spellCheck,d=i.value,f=i.stack,p=u,v=d.document,h=d.selection,m=d.decorations,y=v.getSelectionIndexes(h),g=hn(v,v.getDecorations(f).concat(m)),b=v.nodes.toArray().map(function(t,n){var r=!!y&&y.start<=n&&n<y.end;return e.renderNode(t,r,g[n])}),k=ce({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},a?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style);return In("render",{props:t}),r.createElement(p,ce({},n,{"data-slate-editor":!0,ref:this.ref,"data-key":v.key,contentEditable:!a||null,suppressContentEditableWarning:!0,className:o,autoCorrect:t.autoCorrect?"on":"off",spellCheck:l,style:k,role:a?null:c||"textbox",tabIndex:s,"data-gramm":!1}),b)}}]),t}(r.Component);Ln.propTypes={autoCorrect:ee.bool.isRequired,className:ee.string,editor:ee.object.isRequired,readOnly:ee.bool.isRequired,role:ee.string,spellCheck:ee.bool.isRequired,style:ee.object,tabIndex:ee.number,tagName:ee.string},Ln.defaultProps={style:{},tagName:"div"},oe.forEach(function(e){Ln.propTypes[e]=ee.func.isRequired});var _n={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},qn=_n.FRAGMENT,zn=_n.HTML,Wn=_n.TEXT;function Vn(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.fragment,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=it(e.target),i=a.getSelection(),s=n.schema,c=n.selection,u=c.start,l=c.end,d=n.document.getClosestVoid(u.key,s),f=n.document.getClosestVoid(l.key,s);if(!i.isCollapsed||d){var p=ge.serializeNode(r),v=i.getRangeAt(0),h=v.cloneContents(),m=h.childNodes[0];if(h.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(m=e)}),f){var y=v.cloneRange(),g=bn(f,a);y.setEndAfter(g),h=y.cloneContents()}if(d&&(m=h.childNodes[0].childNodes[1].firstChild),[].slice.call(h.querySelectorAll(xn)).forEach(function(e){var t="n"===e.getAttribute(wn);e.textContent=t?"\n":""}),3==m.nodeType){var b=a.document.createElement("span");b.style.whiteSpace="pre",b.appendChild(m),h.appendChild(b),m=b}m.setAttribute("data-slate-fragment",p);var k=t.Value.create({document:r}),C=Ce.serialize(k),w=a.document.createElement("div");w.appendChild(h),e.clipboardData&&e.clipboardData.setData&&!Ye&&(e.preventDefault(),e.clipboardData.setData(Wn,C),e.clipboardData.setData(qn,p),e.clipboardData.setData(zn,w.innerHTML),o());var x=e.target.closest("[data-slate-editor]");w.setAttribute("contenteditable",!0),w.style.position="absolute",w.style.left="-9999px",x.appendChild(w),i.selectAllChildren(w),a.requestAnimationFrame(function(){x.removeChild(w),Bn(i),i.addRange(v),o()})}}function Un(e,t){var n=e.closest("[data-key]");if(!n)return null;var r=n.getAttribute("data-key");return r&&t.document.getNode(r)||null}function $n(e,t){e.nativeEvent&&(e=e.nativeEvent);var n=e,r=n.x,o=n.y,a=n.target;if(null==r||null==o)return null;var i=t.document,s=t.schema,c=Un(a,t);if(!c)return null;if(s.isVoid(c)){var u=a.getBoundingClientRect(),l="inline"==c.object?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,d=c.getFirstText(),f=i.createRange();if(l){var p=i.getPreviousText(d.key);if(p)return f.moveToEndOfNode(p)}var v=i.getNextText(d.key);return v?f.moveToStartOfNode(v):null}var h=it(a),m=void 0;if(h.document.caretRangeFromPoint)m=h.document.caretRangeFromPoint(r,o);else if(h.document.caretPositionFromPoint){var y=h.document.caretPositionFromPoint(r,o);(m=h.document.createRange()).setStart(y.offsetNode,y.offset),m.setEnd(y.offsetNode,y.offset)}else if(h.document.body.createTextRange){m=h.document.body.createTextRange();try{m.moveToPoint(r,o)}catch(e){return null}}var g=Dn(m,t);return g||null}var Hn=_n.FRAGMENT,Kn=_n.HTML,Jn=_n.NODE,Xn=_n.RICH,Gn=_n.TEXT,Yn=/ data-slate-fragment="([^\s"]+)"/;function Zn(e){!Ye&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=Qn(t,Hn),r=Qn(t,Jn),o=Qn(t,Kn),a=Qn(t,Xn),i=Qn(t,Gn),s=void 0;if(!n&&o&&~o.indexOf(' data-slate-fragment="')){var c=Yn.exec(o),u=de(c,2),l=(u[0],u[1]);l&&(n=l)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!=t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[Hn]&&(n=d[Hn]),d[Jn]&&(r=d[Jn]),d[Gn]&&(i=d[Gn])}n&&(n=ge.deserializeNode(n)),r&&(r=ge.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(s=Array.from(t.files))}catch(e){t.files&&t.files.length&&(s=Array.from(t.files))}var f={files:s,fragment:n,html:o,node:r,rich:a,text:i};return f.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(f),f}function Qn(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t==Gn&&e.getData("Text")||null}var er=_n.TEXT;function tr(e,t,n){var r=_n[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(er),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[er]=i;s[r]=n;var c=""+a+JSON.stringify(s);o.setData(er,c)}}var nr=V("slate:after");function rr(){var e=null;return{onBeforeInput:function(e,t,n){if(nr("onBeforeInput",{event:e}),e.nativeEvent)return e.preventDefault(),void t.insertText(e.data);var r=e.getTargetRanges(),o=de(r,1)[0];if(o){e.preventDefault();var a=t.value,i=a.document,s=a.selection,c=a.schema,u=Dn(o,a);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":return void t.deleteAtRange(u);case"deleteWordBackward":return void t.deleteWordBackwardAtRange(u);case"deleteWordForward":return void t.deleteWordForwardAtRange(u);case"deleteSoftLineBackward":case"deleteHardLineBackward":return void t.deleteLineBackwardAtRange(u);case"deleteSoftLineForward":case"deleteHardLineForward":return void t.deleteLineForwardAtRange(u);case"insertLineBreak":case"insertParagraph":return void(i.hasVoidParent(s.start.path,c)?t.moveToStartOfNextText():t.splitBlockAtRange(u));case"insertFromYank":case"insertReplacementText":case"insertText":var l=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==l)return;return t.insertTextAtRange(u,l,s.marks),void(s.marks&&a.document!=t.value.document&&t.select({marks:null}))}}},onBlur:function(e,t,n){nr("onBlur",{event:e}),t.blur()},onClick:function(e,t,n){if(n.props.readOnly)return!0;var r=t.value,o=r.document,a=r.schema,i=Un(e.target,r),s=o.getAncestors(i.key);i&&(a.isVoid(i)||s.some(function(e){return a.isVoid(e)}))&&t.focus().moveToEndOfNode(i),nr("onClick",{event:e})},onCopy:function(e,t,n){nr("onCopy",{event:e}),Vn(e,t.value)},onCut:function(e,t,n){nr("onCut",{event:e}),Vn(e,t.value,t.value.fragment,function(){var e=t.value,r=e.endBlock,o=e.endInline,a=e.selection,i=e.schema,s=a.isCollapsed,c=r&&i.isVoid(r)&&s,u=o&&i.isVoid(o)&&s;c?n.change(function(e){return e.removeNodeByKey(r.key)}):u?n.change(function(e){return e.removeNodeByKey(o.key)}):n.change(function(e){return e.delete()})})},onDragEnd:function(t,n,r){nr("onDragEnd",{event:t}),e=null},onDragOver:function(e,t,n){nr("onDragOver",{event:e})},onDragStart:function(t,n,r){nr("onDragStart",{event:t}),e=!0;var o=n.value,a=o.document,i=o.schema,s=Un(t.target,o),c=a.getAncestors(s.key),u=s&&(i.isVoid(s)||c.some(function(e){return i.isVoid(e)})),l=o.blocks.some(function(e){return e.key===s.key});u&&!l&&n.moveToRangeOfNode(s);var d=n.value.fragment;tr(t,"fragment",ge.serializeNode(d))},onDrop:function(t,n,r){nr("onDrop",{event:t});var o=n.value,a=o.document,i=o.selection,s=o.schema,c=it(t.target),u=$n(t,o);if(u){var l=Zn(t),d=l.type,f=l.fragment,p=l.text;if(n.focus(),e&&i.end.key==u.end.key&&i.end.offset<u.end.offset&&(u=u.moveForward(i.start.key==i.end.key?0-i.end.offset+i.start.offset:0-i.end.offset)),e&&n.delete(),n.select(u),"text"==d||"html"==d){var v=u.anchor,h=a.hasVoidParent(v.key,s);if(h){for(var m=a.getNode(v.key);h&&(m=a.getNextText(m.key));)h=a.hasVoidParent(m.key,s);m&&n.moveToStartOfNode(m)}p&&p.split("\n").forEach(function(e,t){t>0&&n.splitBlock(),n.insertText(e)})}"fragment"==d&&n.insertFragment(f);var y=bn(a.getNode(u.focus.key),c);y&&y.dispatchEvent(new MouseEvent("mouseup",{view:c,bubbles:!0,cancelable:!0}))}},onInput:function(e,t,n){nr("onInput",{event:e});var r=it(e.target),o=t.value,a=r.getSelection().anchorNode,i=Fn(a,0,o);if(i){var s=o.document,c=o.selection,u=s.getDescendant(i.key),l=s.getClosestBlock(u.key),d=u.getLeaves(),f=l.getLastText(),p=d.last(),v=0,h=0,m=d.find(function(e){if(v=h,(h+=e.text.length)>i.offset)return!0})||p,y=m.text,g=a.textContent,b=u==f,k=m==p,C=g.charAt(g.length-1);if(b&&k&&"\n"==C&&(g=g.slice(0,-1)),g!=y){var w=g.length-y.length,x=c.moveToEnd().moveForward(w),S=c.moveAnchorTo(i.key,v).moveFocusTo(i.key,h);S=s.resolveRange(S),t.insertTextAtRange(S,g,m.marks).select(x)}}},onKeyDown:function(e,t,n){nr("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=r.schema,s=o.hasVoidParent(a.start.path,i);if(ft.isSplitBlock(e)&&!Qe)return s?t.moveToStartOfNextText():t.splitBlock();if(ft.isDeleteBackward(e)&&!Qe)return t.deleteCharBackward();if(ft.isDeleteForward(e)&&!Qe)return t.deleteCharForward();if(ft.isDeleteLineBackward(e))return t.deleteLineBackward();if(ft.isDeleteLineForward(e))return t.deleteLineForward();if(ft.isDeleteWordBackward(e))return t.deleteWordBackward();if(ft.isDeleteWordForward(e))return t.deleteWordForward();if(ft.isRedo(e))return t.redo();if(ft.isUndo(e))return t.undo();if(ft.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(ft.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(ft.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(ft.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(ft.isMoveBackward(e)){var c=r.previousText,u=r.startText,l=c&&o.hasVoidParent(c.key,i);if(s||l||""==u.text)return e.preventDefault(),t.moveBackward()}if(ft.isMoveForward(e)){var d=r.nextText,f=r.startText,p=d&&o.hasVoidParent(d.key,i);if(s||p||""==f.text)return e.preventDefault(),t.moveForward()}if(ft.isExtendBackward(e)){var v=r.previousText,h=r.startText,m=v&&o.hasVoidParent(v.key,i);if(s||m||""==h.text)return e.preventDefault(),t.moveFocusBackward()}if(ft.isExtendForward(e)){var y=r.nextText,g=r.startText,b=y&&o.hasVoidParent(y.key,i);if(s||b||""==g.text)return e.preventDefault(),t.moveFocusForward()}},onPaste:function(e,t,n){nr("onPaste",{event:e});var r=Zn(e),o=r.type,a=r.fragment,i=r.text;if("fragment"==o&&t.insertFragment(a),"text"==o||"html"==o){if(!i)return;var s=t.value,c=s.document,u=s.selection,l=s.startBlock;if(s.schema.isVoid(l))return;var d=l,f=c.getInsertMarksAtRange(u),p=Ce.deserialize(i,{defaultBlock:d,defaultMarks:f}).document;t.insertFragment(p)}},onSelect:function(e,t,n){nr("onSelect",{event:e});var r=it(e.target),o=t.value,a=o.document,i=o.schema,s=r.getSelection();if(s.rangeCount){var c=Dn(s,o);if(c){var u=c,l=u.anchor,d=u.focus,f=a.getNode(l.key),p=a.getNode(d.key),v=a.getClosestInline(l.key),h=a.getClosestInline(d.key),m=a.getClosestBlock(d.key),y=a.getClosestBlock(l.key);if(y&&!i.isVoid(y)&&0==l.offset&&m&&i.isVoid(m)&&0!=d.offset&&(c=c.setFocus(d.setOffset(0))),v&&!i.isVoid(v)&&l.offset==f.text.length){var g=a.getClosestBlock(l.key).getNextText(l.key);g&&(c=c.moveAnchorTo(g.key,0))}if(h&&!i.isVoid(h)&&d.offset==p.text.length){var b=a.getClosestBlock(d.key).getNextText(d.key);b&&(c=c.moveFocusTo(b.key,0))}var k=a.createSelection(c);k=(k=k.setIsFocused(!0)).set("marks",o.selection.marks),t.select(k)}}else t.blur()},renderEditor:function(e,t){var n=t.handlers;return r.createElement(Ln,ce({},n,{autoCorrect:e.autoCorrect,className:e.className,editor:t,readOnly:e.readOnly,role:e.role,spellCheck:e.spellCheck,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName}))},renderNode:function(e){var t=e.attributes,n=e.children,o=e.node;if("block"==o.object||"inline"==o.object){var a="block"==o.object?"div":"span";return r.createElement(a,ce({},t,{style:{position:"relative"}}),n)}},renderPlaceholder:function(e){var n=e.editor,o=e.node;if(n.props.placeholder&&!n.state.isComposing&&"block"==o.object&&t.Text.isTextList(o.nodes)&&""==o.text&&!(n.value.document.getBlocks().size>1))return r.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"}},n.props.placeholder)}}}var or=V("slate:before");function ar(){var e=null,t=0,n=!1,r=!1,a=!1;return{onBeforeInput:function(e,t,n){return!!n.props.readOnly||!(!e.nativeEvent||!tt)||void or("onBeforeInput",{event:e})},onBlur:function(t,n,a){if(r)return!0;if(a.props.readOnly)return!0;var i=n.value,s=i.schema,c=t.relatedTarget,u=t.target,l=it(u);if(e==l.document.activeElement)return!0;if(c){var d=o.findDOMNode(a);if(c==d)return!0;if(c.hasAttribute("data-slate-spacer"))return!0;var f=Un(c,i);if(d.contains(c)&&f&&!s.isVoid(f))return!0}or("onBlur",{event:t})},onChange:function(e,t){e.value.schema!=t.schema&&e.withoutSaving(function(){e.setValue({schema:t.schema}).normalize()}),or("onChange")},onCompositionEnd:function(e,r,o){var a=t;window.requestAnimationFrame(function(){t>a||(n=!1,o.state.isComposing&&o.setState({isComposing:!1}))}),or("onCompositionEnd",{event:e})},onCompositionStart:function(e,r,o){n=!0,t++,o.state.isComposing||o.setState({isComposing:!0}),or("onCompositionStart",{event:e})},onCopy:function(e,t,n){var o=it(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),or("onCopy",{event:e})},onCut:function(e,t,n){if(n.props.readOnly)return!0;var o=it(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),or("onCut",{event:e})},onDragEnd:function(e,t,n){a=!1,or("onDragEnd",{event:e})},onDragEnter:function(e,t,n){or("onDragEnter",{event:e})},onDragExit:function(e,t,n){or("onDragExit",{event:e})},onDragLeave:function(e,t,n){or("onDragLeave",{event:e})},onDragOver:function(e,t,n){var r=n.value.schema,o=Un(e.target,n.value);r.isVoid(o)&&e.preventDefault(),Ye&&e.preventDefault(),a||(a=!0,Ye||(e.nativeEvent.dataTransfer.dropEffect="move")),or("onDragOver",{event:e})},onDragStart:function(e,t,n){a=!0,or("onDragStart",{event:e})},onDrop:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),or("onDrop",{event:e})},onFocus:function(t,n,a){if(r)return!0;if(a.props.readOnly)return!0;var i=o.findDOMNode(a),s=it(t.target);if(e=s.document.activeElement,Xe&&t.target!=i)return i.focus(),!0;or("onFocus",{event:t})},onInput:function(e,t,r){return!!n||!!t.value.selection.isBlurred||void or("onInput",{event:e})},onKeyDown:function(e,t,r){return!!r.props.readOnly||(n?(ft.isCompose(e)&&e.preventDefault(),!0):(!Qe&&(ft.isBold(e)||ft.isDeleteBackward(e)||ft.isDeleteForward(e)||ft.isDeleteLineBackward(e)||ft.isDeleteLineForward(e)||ft.isDeleteWordBackward(e)||ft.isDeleteWordForward(e)||ft.isItalic(e)||ft.isRedo(e)||ft.isSplitBlock(e)||ft.isTransposeCharacter(e)||ft.isUndo(e))&&e.preventDefault(),void or("onKeyDown",{event:e})))},onPaste:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),or("onPaste",{event:e})},onSelect:function(t,o,a){if(r)return!0;if(n)return!0;if(a.props.readOnly)return!0;var i=it(t.target);e=i.document.activeElement,or("onSelect",{event:t})}}}var ir=V("slate:editor"),sr=function(e){function t(){var e,n,r;ae(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=le(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),cr.call(r),le(r,n)}return ue(t,e),ie(t,[{key:"componentDidMount",value:function(){this.tmp.updates++;var e=this.props.autoFocus,t=this.tmp.change;e&&(t?t.focus():this.focus()),t&&this.onChange(t)}},{key:"componentDidUpdate",value:function(e){this.tmp.updates++;var t=this.tmp,n=t.change,r=t.resolves,o=t.updates;te(r<5||r!==o,"A Slate <Editor> component is re-resolving `props.plugins` or `props.schema` on each update, which leads to poor performance. This is often due to passing in a new `schema` or `plugins` prop with each render by declaring them inline in your render function. Do not do this!"),n&&this.onChange(n)}},{key:"render",value:function(){ir("render",this);var e=ce({},this.props);return this.stack.render("renderEditor",e,this)}},{key:"plugins",get:function(){return this.resolvePlugins(this.props.plugins,this.props.schema)}},{key:"schema",get:function(){return this.resolveSchema(this.plugins)}},{key:"stack",get:function(){return this.resolveStack(this.plugins)}},{key:"value",get:function(){return this.plugins===this.tmp.plugins&&this.props.value===this.tmp.value?this.tmp.value:this.resolveValue(this.plugins,this.props.value)}}]),t}(r.Component);sr.propTypes={autoCorrect:ee.bool,autoFocus:ee.bool,className:ee.string,onChange:ee.func,placeholder:ee.any,plugins:ee.array,readOnly:ee.bool,role:ee.string,schema:ee.object,spellCheck:ee.bool,style:ee.object,tabIndex:ee.number,value:$.value.isRequired},sr.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},plugins:[],readOnly:!1,schema:{},spellCheck:!0};var cr=function(){var e=this;this.state={},this.tmp={change:null,isChanging:!1,operationsSize:null,plugins:null,resolves:0,updates:0,value:null},this.handlers=oe.reduce(function(t,n){return t[n]=function(t){return e.onEvent(n,t)},t},{}),this.change=function(){if(e.tmp.isChanging)te(!1,"The `editor.change` method was called from within an existing `editor.change` callback. This is not allowed, and often due to calling `editor.change` directly from a plugin's event handler which is unnecessary.");else{var t=e.value.change();try{e.tmp.isChanging=!0,t.call.apply(t,arguments)}catch(e){throw e}finally{e.tmp.isChanging=!1}e.onChange(t)}},this.blur=function(){e.change(function(e){return e.blur()})},this.focus=function(){e.change(function(e){return e.focus()})},this.onChange=function(t){0!==t.operations.size&&(ir("onChange",{change:t}),t=e.resolveChange(e.plugins,t,t.operations.size),e.tmp.value=t.value,e.tmp.plugins=e.plugins,delete e.tmp.change,delete e.tmp.operationsSize,e.props.onChange(t))},this.onEvent=function(t,n){e.change(function(r){e.stack.run(t,n,r,e)})},this.resolveChange=re(function(t,n,r){return e.resolveStack(t).run("onChange",n,e),n}),this.resolvePlugins=re(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ir("resolvePlugins",{plugins:t,schema:n}),e.tmp.resolves++;var r=ar(),o=rr(),a={schema:n},i=function(t){return"onChange"==t?"continue":"schema"==t?"continue":void(a[t]=function(){var n;return e.props[t]&&(n=e.props)[t].apply(n,arguments)})},s=!0,c=!1,u=void 0;try{for(var l,d=pe[Symbol.iterator]();!(s=(l=d.next()).done);s=!0)i(l.value)}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}return[r,a].concat(fe(t),[o])}),this.resolveSchema=re(function(e){return ir("resolveSchema",{plugins:e}),t.Schema.create({plugins:e})}),this.resolveStack=re(function(e){return ir("resolveStack",{plugins:e}),t.Stack.create({plugins:e})}),this.resolveValue=re(function(t,n){ir("resolveValue",{plugins:t,value:n});var r=n.change();return r=e.resolveChange(t,r,r.operations.size),e.tmp.change=r,e.tmp.operationsSize=r.operations.size,r.value})},ur=!0,lr=!1,dr=void 0;try{for(var fr,pr=oe[Symbol.iterator]();!(ur=(fr=pr.next()).done);ur=!0){var vr=fr.value;sr.propTypes[vr]=ee.func}}catch(e){lr=!0,dr=e}finally{try{!ur&&pr.return&&pr.return()}finally{if(lr)throw dr}}var hr={Editor:sr,cloneFragment:Vn,findDOMNode:bn,findDOMRange:Cn,findNode:Un,findRange:Dn,getEventRange:$n,getEventTransfer:Zn,setEventTransfer:tr,AfterPlugin:rr,BeforePlugin:ar};e.Editor=sr,e.cloneFragment=Vn,e.findDOMNode=bn,e.findDOMRange=Cn,e.findNode=Un,e.findRange=Dn,e.getEventRange=$n,e.getEventTransfer=Zn,e.setEventTransfer=tr,e.AfterPlugin=rr,e.BeforePlugin=ar,e.default=hr,Object.defineProperty(e,"__esModule",{value:!0})});
