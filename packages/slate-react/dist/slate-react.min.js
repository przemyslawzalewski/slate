!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("slate-prop-types"),require("react-immutable-proptypes"),require("slate"),require("immutable"),require("slate-dev-warning"),require("get-window"),require("slate-dev-environment"),require("selection-is-backward"),require("slate-base64-serializer"),require("slate-plain-serializer"),require("slate-hotkeys"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","slate-prop-types","react-immutable-proptypes","slate","immutable","slate-dev-warning","get-window","slate-dev-environment","selection-is-backward","slate-base64-serializer","slate-plain-serializer","slate-hotkeys","react-dom"],t):t(e.SlateReact={},e.React,e.SlateTypes,e.ImmutableTypes,e.Slate,e.Immutable,e.warning,e.getWindow,e.slateDevEnvironment,e.isBackward,e.Base64,e.Plain,e.Hotkeys,e.ReactDOM)}(this,function(e,t,n,r,o,a,i,s,c,l,u,d,f,p){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i,s=s&&s.hasOwnProperty("default")?s.default:s,l=l&&l.hasOwnProperty("default")?l.default:l,u=u&&u.hasOwnProperty("default")?u.default:u,d=d&&d.hasOwnProperty("default")?d.default:d,f=f&&f.hasOwnProperty("default")?f.default:f;var v="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function h(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}var m=h,y=g;function b(e){if(m===setTimeout)return setTimeout(e,0);if((m===h||!m)&&setTimeout)return m=setTimeout,setTimeout(e,0);try{return m(e,0)}catch(t){try{return m.call(null,e,0)}catch(t){return m.call(this,e,0)}}}"function"==typeof v.setTimeout&&(m=setTimeout),"function"==typeof v.clearTimeout&&(y=clearTimeout);var k,w=[],E=!1,C=-1;function S(){E&&k&&(E=!1,k.length?w=k.concat(w):C=-1,w.length&&x())}function x(){if(!E){var e=b(S);E=!0;for(var t=w.length;t;){for(k=w,w=[];++C<t;)k&&k[C].run();C=-1,t=w.length}k=null,E=!1,function(e){if(y===clearTimeout)return clearTimeout(e);if((y===g||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(e);try{y(e)}catch(t){try{return y.call(null,e)}catch(t){return y.call(this,e)}}}(e)}}function O(e,t){this.fun=e,this.array=t}O.prototype.run=function(){this.fun.apply(null,this.array)};function T(){}var D=T,N=T,R=T,A=T,P=T,F=T,I=T;var B=v.performance||{},j=B.now||B.mozNow||B.msNow||B.oNow||B.webkitNow||function(){return(new Date).getTime()};var _=new Date;var M={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];w.push(new O(e,t)),1!==w.length||E||b(x)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:D,addListener:N,once:R,off:A,removeListener:P,removeAllListeners:F,emit:I,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*j.call(B),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-_)/1e3}},L="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function q(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function V(e,t){return e(t={exports:{}},t.exports),t.exports}var z=1e3,U=60*z,W=60*U,$=24*W,H=365.25*$,K=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*H;case"days":case"day":case"d":return n*$;case"hours":case"hour":case"hrs":case"hr":case"h":return n*W;case"minutes":case"minute":case"mins":case"min":case"m":return n*U;case"seconds":case"second":case"secs":case"sec":case"s":return n*z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?X(n=e,$,"day")||X(n,W,"hour")||X(n,U,"minute")||X(n,z,"second")||n+" ms":function(e){if(e>=$)return Math.round(e/$)+"d";if(e>=W)return Math.round(e/W)+"h";if(e>=U)return Math.round(e/U)+"m";if(e>=z)return Math.round(e/z)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function X(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var J=V(function(e,t){var n;function r(e){function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var a=i[c];n=o.call(e,a),i.splice(c,1),c--}return n}),t.formatArgs.call(e,i),(r.log||t.log||console.log.bind(console)).apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=K,t.names=[],t.skips=[],t.formatters={}}),G=(J.coerce,J.disable,J.enable,J.enabled,J.humanize,J.names,J.skips,J.formatters,V(function(e,t){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==M&&"env"in M&&(e=M.env.DEBUG),e}(t=e.exports=J).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(a=++o)}),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())})),Y=(G.log,G.formatArgs,G.save,G.load,G.useColors,G.storage,G.colors,V(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,v=n?Symbol.for("react.memo"):60115,h=n?Symbol.for("react.lazy"):60116;function g(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case a:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case l:case f:case c:return e;default:return t}}case h:case v:case o:return t}}}function m(e){return g(e)===d}t.typeOf=g,t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=h,t.Memo=v,t.Portal=o,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===s||e===i||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===f)},t.isAsyncMode=function(e){return m(e)||g(e)===u},t.isConcurrentMode=m,t.isContextConsumer=function(e){return g(e)===l},t.isContextProvider=function(e){return g(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return g(e)===f},t.isFragment=function(e){return g(e)===a},t.isLazy=function(e){return g(e)===h},t.isMemo=function(e){return g(e)===v},t.isPortal=function(e){return g(e)===o},t.isProfiler=function(e){return g(e)===s},t.isStrictMode=function(e){return g(e)===i},t.isSuspense=function(e){return g(e)===p}}));q(Y);Y.typeOf,Y.AsyncMode,Y.ConcurrentMode,Y.ContextConsumer,Y.ContextProvider,Y.Element,Y.ForwardRef,Y.Fragment,Y.Lazy,Y.Memo,Y.Portal,Y.Profiler,Y.StrictMode,Y.Suspense,Y.isValidElementType,Y.isAsyncMode,Y.isConcurrentMode,Y.isContextConsumer,Y.isContextProvider,Y.isElement,Y.isForwardRef,Y.isFragment,Y.isLazy,Y.isMemo,Y.isPortal,Y.isProfiler,Y.isStrictMode,Y.isSuspense;var Z=V(function(e,t){});q(Z);Z.typeOf,Z.AsyncMode,Z.ConcurrentMode,Z.ContextConsumer,Z.ContextProvider,Z.Element,Z.ForwardRef,Z.Fragment,Z.Lazy,Z.Memo,Z.Portal,Z.Profiler,Z.StrictMode,Z.Suspense,Z.isValidElementType,Z.isAsyncMode,Z.isConcurrentMode,Z.isContextConsumer,Z.isContextProvider,Z.isElement,Z.isForwardRef,Z.isFragment,Z.isLazy,Z.isMemo,Z.isPortal,Z.isProfiler,Z.isStrictMode,Z.isSuspense,V(function(e){e.exports=Y});var Q=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;var ne="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function re(){}function oe(){}oe.resetWarningCache=re;var ae=V(function(e){e.exports=function(){function e(e,t,n,r,o,a){if(a!==ne){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:oe,resetWarningCache:re};return n.PropTypes=n,n}()}),ie=function(e,t){return e===t};function se(e,t){var n;void 0===t&&(t=ie);var r,o=[],a=!1,i=function(e,n){return t(e,o[n])};return function(){for(var t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return a&&n===this&&s.length===o.length&&s.every(i)?r:(r=e.apply(this,s),a=!0,n=this,o=s,r)}}var ce=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onPaste","onSelect"],le=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),de=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ve=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},he=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ge=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},me=[].concat(ge(ce),["decorateNode","onChange","renderEditor","renderMark","renderNode","renderPlaceholder","renderPortal","schema","validateNode"]);var ye=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},be="object"==typeof L&&L&&L.Object===Object&&L,ke="object"==typeof self&&self&&self.Object===Object&&self,we=be||ke||Function("return this")(),Ee=function(){return we.Date.now()},Ce=we.Symbol,Se=Object.prototype,xe=Se.hasOwnProperty,Oe=Se.toString,Te=Ce?Ce.toStringTag:void 0;var De=function(e){var t=xe.call(e,Te),n=e[Te];try{e[Te]=void 0;var r=!0}catch(e){}var o=Oe.call(e);return r&&(t?e[Te]=n:delete e[Te]),o},Ne=Object.prototype.toString;var Re=function(e){return Ne.call(e)},Ae="[object Null]",Pe="[object Undefined]",Fe=Ce?Ce.toStringTag:void 0;var Ie=function(e){return null==e?void 0===e?Pe:Ae:Fe&&Fe in Object(e)?De(e):Re(e)};var Be=function(e){return null!=e&&"object"==typeof e},je="[object Symbol]";var _e=function(e){return"symbol"==typeof e||Be(e)&&Ie(e)==je},Me=NaN,Le=/^\s+|\s+$/g,qe=/^[-+]0x[0-9a-f]+$/i,Ve=/^0b[01]+$/i,ze=/^0o[0-7]+$/i,Ue=parseInt;var We=function(e){if("number"==typeof e)return e;if(_e(e))return Me;if(ye(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ye(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Le,"");var n=Ve.test(e);return n||ze.test(e)?Ue(e.slice(2),n?2:8):qe.test(e)?Me:+e},$e="Expected a function",He=Math.max,Ke=Math.min;var Xe=function(e,t,n){var r,o,a,i,s,c,l=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError($e);function p(t){var n=r,a=o;return r=o=void 0,l=t,i=e.apply(a,n)}function v(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-l>=a}function h(){var e=Ee();if(v(e))return g(e);s=setTimeout(h,function(e){var n=t-(e-c);return d?Ke(n,a-(e-l)):n}(e))}function g(e){return s=void 0,f&&r?p(e):(r=o=void 0,i)}function m(){var e=Ee(),n=v(e);if(r=arguments,o=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(h,t),u?p(e):i}(c);if(d)return s=setTimeout(h,t),p(c)}return void 0===s&&(s=setTimeout(h,t)),i}return t=We(t)||0,ye(n)&&(u=!!n.leading,a=(d="maxWait"in n)?He(We(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=o=s=void 0},m.flush=function(){return void 0===s?i:g(Ee())},m},Je="Expected a function";var Ge=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError(Je);return ye(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Xe(e,t,{leading:r,maxWait:t,trailing:o})},Ye=/^([\w-]+)(?::(\d+))?$/;var Ze={parse:function(e){var t=Ye.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=he(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},Qe=G("slate:leaves"),et=function(e){function n(){var e,t,r;le(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=ve(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),tt.call(r),ve(r,t)}return pe(n,e),ue(n,[{key:"shouldComponentUpdate",value:function(e){return e.index!=this.props.index||e.marks!=this.props.marks||e.text!=this.props.text||e.parent!=this.props.parent}},{key:"render",value:function(){this.debug("render",this);var e=this.props,n=e.node,r=e.index,o=Ze.stringify({key:n.key,index:r});return t.createElement("span",{"data-offset-key":o},this.renderMarks())}},{key:"renderMarks",value:function(){var e=this.props,t=e.marks,n=e.node,r=e.offset,o=e.text,a=e.editor,i=a.stack,s=this.renderText(),c={"data-slate-leaf":!0};return t.reduce(function(e,s){var l={editor:a,mark:s,marks:t,node:n,offset:r,text:o,children:e,attributes:c};return i.find("renderMark",l)||e},s)}},{key:"renderText",value:function(){var e=this.props,n=e.block,r=e.node,o=e.editor,a=e.parent,i=e.text,s=e.index,c=e.leaves;if(o.value.schema.isVoid(a))return t.createElement("span",{"data-slate-zero-width":"z"},"​");if(""===i&&"block"===a.object&&""===a.text&&a.nodes.last()===r)return t.createElement("span",{"data-slate-zero-width":"n"},"​");if(""===i)return t.createElement("span",{"data-slate-zero-width":"z"},"​");var l=n.getLastText(),u=i.charAt(i.length-1),d=r===l,f=s===c.size-1;return d&&f&&"\n"===u?i+"\n":i}}]),n}(t.Component);et.propTypes={block:n.block.isRequired,editor:ae.object.isRequired,index:ae.number.isRequired,leaves:n.leaves.isRequired,marks:n.marks.isRequired,node:n.node.isRequired,offset:ae.number.isRequired,parent:n.node.isRequired,text:ae.string.isRequired};var tt=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Qe.apply(void 0,[t,e.props.node.key+"-"+e.props.index].concat(r))}},nt=G("slate:node"),rt=function(e){function n(){var e,t,r;le(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=ve(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),ot.call(r),ve(r,t)}return pe(n,e),ue(n,[{key:"render",value:function(){var e=this;this.debug("render",this);var n=this.props,r=n.decorations,a=n.editor,i=n.node,s=n.style,c=a.value.document,l=i.key,u=r.filter(function(e){var t=e.start,n=e.end;if(t.key===l||n.key===l)return!0;if(t.key===n.key)return!1;var r=c.assertPath(l);return-1!==o.PathUtils.compare(r,t.path)&&1!==o.PathUtils.compare(r,n.path)}),d=0===u.size?i.getLeaves():i.getLeaves(u),f=0,p=d.map(function(t,n){var r=e.renderLeaf(d,t,n,f);return f+=t.text.length,r});return t.createElement("span",{"data-key":l,style:s},p)}}]),n}(t.Component);rt.propTypes={block:n.block,decorations:r.list.isRequired,editor:ae.object.isRequired,node:n.node.isRequired,parent:n.node.isRequired,style:ae.object},rt.defaultProps={style:null};var ot=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node.key;nt.apply(void 0,[t,a+" (text)"].concat(r))},this.shouldComponentUpdate=function(t){var n=t,r=e.props;if(n.node!=r.node)return!0;if("block"==n.parent.object){var o=r.parent.nodes.last(),a=n.parent.nodes.last();if(r.node==o&&n.node!=a)return!0}return!n.decorations.equals(r.decorations)},this.renderLeaf=function(n,r,o,a){var i=e.props,s=i.block,c=i.node,l=i.parent,u=i.editor,d=r.text,f=r.marks;return t.createElement(et,{key:c.key+"-"+o,block:s,editor:u,index:o,marks:f,node:c,offset:a,parent:l,leaves:n,text:d})}},at=G("slate:void"),it=function(e){function n(){var e,t,r;le(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=ve(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),st.call(r),ve(r,t)}return pe(n,e),ue(n,[{key:"render",value:function(){var e=this.props,n=e.children,r=e.node,o=e.readOnly,a="block"==r.object?"div":"span",i=t.createElement(a,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText()),s=t.createElement(a,{contentEditable:!!o&&null},n);return this.debug("render",{props:e}),t.createElement(a,{"data-slate-void":!0,"data-key":r.key,contentEditable:!(!o&&"block"!=r.object)&&null},o?null:i,s)}}]),n}(t.Component);it.propTypes={block:n.block,children:ae.any.isRequired,editor:ae.object.isRequired,node:n.node.isRequired,parent:n.node.isRequired,readOnly:ae.bool.isRequired};var st=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";at.apply(void 0,[t,""+i].concat(r))},this.renderText=function(){var n=e.props,r=n.block,o=n.decorations,a=n.node,i=n.readOnly,s=n.editor,c=a.getFirstText();return t.createElement(rt,{block:"block"==a.object?a:r,decorations:o,editor:s,key:c.key,node:c,parent:a,readOnly:i})}};function ct(e,t){var n=a.Set().asMutable(),r=[];return function(e,t){if(t.isEmpty())return e.nodes.toArray().map(function(e,t){return{child:e,index:t}});var n=de({},e.key,0),r=1;e.forEachDescendant(function(e){n[e.key]=r,r+=1});var o=e.nodes.toArray(),a=o.map(function(e,t){return{child:e,index:t,order:n[e.key]}});return t.forEach(function(e){var t=n[e.start.key],i=void 0===t?0:function(e,t,n){var r=e.findIndex(function(e){return n<t[e.key]});if(r<=0)return 0;var o=e[r-1];return t[o.key]}(o,n,t);a.push({isRangeStart:!0,order:i-.5,decoration:e});var s=(n[e.end.key]||r)+.5;a.push({isRangeEnd:!0,order:s,decoration:e})}),a.sort(function(e,t){return e.order>t.order?1:-1})}(e,t).forEach(function(e){e.isRangeStart?n.add(e.decoration):e.isRangeEnd?n.remove(e.decoration):r.push(n.toList())}),r}var lt=G("slate:node"),ut=function(e){function n(){var e,t,r;le(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return t=r=ve(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),dt.call(r),ve(r,t)}return pe(n,e),ue(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.stack.find("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(n)return!0;i(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!=o.readOnly||(r.node!=o.node||(!(!r.isSelected&&!o.isSelected)||(!(!r.isFocused&&!o.isFocused)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e=this;this.debug("render",this);var n=this.props,r=n.editor,o=n.isSelected,a=n.isFocused,i=n.node,s=n.decorations,c=n.parent,l=n.readOnly,u=r.value,d=u.selection,f=u.schema,p=r.stack,v=i.getSelectionIndexes(d,o),h=ct(i,s.concat(i.getDecorations(p))),g=[];i.nodes.forEach(function(t,n){var r=!!v&&v.start<=n&&n<v.end;g.push(e.renderNode(t,r,h[n]))});var m={"data-key":i.key};"block"==i.object&&"block"!=i.nodes.first().object&&("rtl"==i.getTextDirection()&&(m.dir="rtl"));var y={key:i.key,editor:r,isFocused:a,isSelected:o,node:i,parent:c,readOnly:l},b=p.find("renderPlaceholder",y);b&&(b=t.cloneElement(b,{key:i.key+"-placeholder"}),g=[b].concat(ge(g)));var k=p.find("renderNode",fe({},y,{attributes:m,children:g}));return f.isVoid(i)?t.createElement(it,this.props,k):k}}]),n}(t.Component);ut.propTypes={block:n.block,decorations:r.list.isRequired,editor:ae.object.isRequired,isFocused:ae.bool.isRequired,isSelected:ae.bool.isRequired,node:n.node.isRequired,parent:n.node.isRequired,readOnly:ae.bool.isRequired};var dt=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,s=a.type;lt.apply(void 0,[t,i+" ("+s+")"].concat(r))},this.renderNode=function(n,r,o){var a=e.props,i=a.block,s=a.editor,c=a.node,l=a.readOnly,u=a.isFocused,d="text"==n.object?rt:ut;return t.createElement(d,{block:"block"==c.object?c:i,decorations:o,editor:s,isSelected:r,isFocused:u&&r,key:n.key,node:n,parent:c,readOnly:l})}};function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;o.Node.isNode(e)&&(e=e.key);var n=t.document.querySelector('[data-key="'+e+'"]');if(!n)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return n}function pt(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=ft(e.key,t),r=0,o=void 0,a=t.document.createNodeIterator(n,NodeFilter.SHOW_TEXT,function(){return NodeFilter.FILTER_ACCEPT},!1);o=a.nextNode();){var i=r+o.textContent.length;if(e.offset<=i){var s=e.offset-r;return{node:o,offset:s>=0?s:0}}r=i}return null}function vt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.anchor,r=e.focus,o=e.isBackward,a=e.isCollapsed,i=pt(n,t),s=a?i:pt(r,t);if(!i||!s)return null;var c=t.document.createRange(),l=o?s:i,u=o?i:s;return c.setStart(l.node,l.offset),c.setEnd(u.node,u.offset),c}var ht="data-slate-zero-width",gt="["+ht+"]",mt="data-offset-key",yt="["+mt+"]",bt="[data-key]",kt="[data-slate-void]";function wt(e,t,n){var r=function(e,t){if(1==e.nodeType&&e.childNodes.length){var n=t==e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=Et(e,o,r);1==e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=Et(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,t),o=r.node,a=r.offset,i=s(e),c=o.parentNode,l=c.closest(yt),u=void 0,d=void 0;if(l){var f=i.document.createRange(),p=l.closest(bt);f.setStart(p,0),f.setEnd(o,a),d=p,u=f.toString().length}else{var v=c.closest(kt);if(!v)return null;if(!(l=v.querySelector(yt)))return null;u=(d=l).textContent.length}u==d.textContent.length&&c.hasAttribute(ht)&&u--;var h=l.getAttribute(mt);if(!h)return null;var g=Ze.parse(h).key;return n.document.hasDescendant(g)?n.document.createPoint({key:g,offset:u}):null}function Et(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,s=!1;(8==o.nodeType||1==o.nodeType&&0==o.childNodes.length||1==o.nodeType&&"false"==o.getAttribute("contenteditable"))&&(!i||!s);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(s=!0,a=t+1,n="forward"):(o=r[a],"forward"==n&&a++,"backward"==n&&a--);return o||null}function Ct(e,t){var n=e.anchorNode||e.startContainer;if(!n)return null;var r=s(n);(e instanceof r.Range||r.StaticRange&&e instanceof r.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var o=e,a=o.anchorNode,i=o.anchorOffset,l=o.focusNode,u=o.focusOffset,d=o.isCollapsed,f=wt(a,i,t),p=d?f:wt(l,u,t);if(!f||!p)return null;if(c.IS_IE||c.IS_EDGE){var v=pt(f),h=pt(p);e={anchorNode:v.node,anchorOffset:v.offset,focusNode:h.node,focusOffset:h.offset}}return t.document.createRange({anchor:f,focus:p})}var St=["auto","overlay","scroll"],xt=c.IS_IOS&&!!window.navigator.userAgent.match(/os 11_/i);function Ot(e){if(!xt&&e.anchorNode){var t=s(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(St.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n==t.document.body||n==t.document.documentElement,o=l(e),a=e.getRangeAt(0).cloneRange();a.collapse(o);var i=a.getBoundingClientRect();c.IS_SAFARI&&a.collapsed&&0==i.top&&0==i.height&&(0==a.startOffset?a.setEnd(a.endContainer,1):a.setStart(a.startContainer,a.startOffset-1),0==(i=a.getBoundingClientRect()).top&&0==i.height&&a.getClientRects().length&&(i=a.getClientRects()[0]));var u=void 0,d=void 0,f=void 0,p=void 0,v=0,h=0,g=0,m=0,y=0,b=0,k=0,w=0;if(r){u=t.innerWidth,d=t.innerHeight,f=t.pageYOffset,p=t.pageXOffset}else{var E=n.offsetWidth,C=n.offsetHeight,S=n.scrollTop,x=n.scrollLeft,O=t.getComputedStyle(n),T=O.borderTopWidth,D=O.borderBottomWidth,N=O.borderLeftWidth,R=O.borderRightWidth,A=O.paddingTop,P=O.paddingBottom,F=O.paddingLeft,I=O.paddingRight,B=n.getBoundingClientRect();u=E,d=C,v=B.top+parseInt(T,10),h=B.left+parseInt(N,10),g=parseInt(T,10)+parseInt(D,10),m=parseInt(N,10)+parseInt(R,10),y=parseInt(A,10),b=parseInt(P,10),k=parseInt(F,10),w=parseInt(I,10),f=S,p=x}var j=i.top+f-v,_=i.left+p-h,M=p,L=f;_<p?M=_-k:_+i.width+m>p+u&&(M=_+m+w-u),j<f?L=j-y:j+i.height+g>f+d&&(L=j+g+b+i.height-d),r?t.scrollTo(M,L):(n.scrollTop=L,n.scrollLeft=M)}}function Tt(e){var t=window.document;if(t&&t.body.createTextRange){var n=t.body.createTextRange();n.collapse(),n.select()}else e.removeAllRanges()}var Dt=/Permission denied to access property "nodeType"/,Nt=G("slate:content"),Rt=function(e){function n(){var e,r,o;le(this,n);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return r=o=ve(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),o.tmp={isUpdatingSelection:!1},o.handlers=ce.reduce(function(e,t){return e[t]=function(e){return o.onEvent(t,e)},e},{}),o.updateSelection=function(){var e=o.props.editor.value.selection,t=e.isBackward,n=s(o.element),r=n.getSelection();if(r){var a=r.rangeCount,l=r.anchorNode;if(a||!e.isBlurred){if(e.isBlurred){if(!o.isInEditor(l))return;return Tt(r),o.element.blur(),void Nt("updateSelection",{selection:e,native:r})}if(!e.isUnset){var u=!!a&&r.getRangeAt(0),d=vt(e,n);if(d){var f=d.startContainer,p=d.startOffset,v=d.endContainer,h=d.endOffset;u&&(f==u.startContainer&&p==u.startOffset&&v==u.endContainer&&h==u.endOffset||f==u.endContainer&&p==u.endOffset&&v==u.startContainer&&h==u.startOffset)||(o.tmp.isUpdatingSelection=!0,Tt(r),r.setBaseAndExtent?t?r.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):r.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset):r.addRange(d),Ot(r),setTimeout(function(){c.IS_FIREFOX&&o.element&&o.element.focus(),o.tmp.isUpdatingSelection=!1}),Nt("updateSelection",{selection:e,native:r}))}else i(!1,"Unable to find a native DOM range from the current selection.")}}}},o.ref=function(e){o.element=e},o.isInEditor=function(e){var t=o.element,n=void 0;try{n=3===e.nodeType?e.parentNode:e}catch(e){if(c.IS_FIREFOX&&Dt.test(e.message))return!1;throw e}return n.isContentEditable&&(n===t||n.closest("[data-slate-editor]")===t)},o.onNativeSelectionChange=Ge(function(e){o.props.readOnly||s(e.target).document.activeElement===o.element&&o.props.onSelect(e)},100),o.renderNode=function(e,n,r){var a=o.props,i=a.editor,s=a.readOnly,c=i.value,l=c.document,u=c.selection.isFocused;return t.createElement(ut,{block:null,editor:i,decorations:r,isSelected:n,isFocused:u&&n,key:e.key,node:e,parent:l,readOnly:s})},ve(o,r)}return pe(n,e),ue(n,[{key:"componentDidMount",value:function(){s(this.element).document.addEventListener("selectionchange",this.onNativeSelectionChange),c.HAS_INPUT_EVENTS_LEVEL_2&&this.element.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection()}},{key:"componentWillUnmount",value:function(){var e=s(this.element);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),c.HAS_INPUT_EVENTS_LEVEL_2&&this.element.removeEventListener("beforeinput",this.handlers.onBeforeInput)}},{key:"componentDidUpdate",value:function(){this.updateSelection()}},{key:"onEvent",value:function(e,t){if(Nt("onEvent",e),!this.tmp.isUpdatingSelection||"onSelect"!=e&&"onBlur"!=e&&"onFocus"!=e){if("onSelect"==e){var n=this.props.editor.value,r=n.selection,o=Ct(s(t.target).getSelection(),n);if(o&&o.equals(r.toRange()))return void this.updateSelection()}if("onDragEnd"==e||"onDragEnter"==e||"onDragExit"==e||"onDragLeave"==e||"onDragOver"==e||"onDragStart"==e||"onDrop"==e)if(t.target.closest("[data-slate-editor]")!==this.element)return;("onBeforeInput"!=e&&"onBlur"!=e&&"onCompositionEnd"!=e&&"onCompositionStart"!=e&&"onCopy"!=e&&"onCut"!=e&&"onFocus"!=e&&"onInput"!=e&&"onKeyDown"!=e&&"onKeyUp"!=e&&"onPaste"!=e&&"onSelect"!=e||this.isInEditor(t.target))&&this.props[e](t)}}},{key:"render",value:function(){var e=this,n=this.props,r=this.handlers,o=n.className,a=n.readOnly,i=n.editor,s=n.tabIndex,c=n.role,l=n.tagName,u=n.spellCheck,d=i.value,f=i.stack,p=l,v=d.document,h=d.selection,g=d.decorations,m=v.getSelectionIndexes(h),y=ct(v,v.getDecorations(f).concat(g)),b=v.nodes.toArray().map(function(t,n){var r=!!m&&m.start<=n&&n<m.end;return e.renderNode(t,r,y[n])}),k=fe({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},a?{}:{WebkitUserModify:"read-write-plaintext-only"},n.style);return Nt("render",{props:n}),t.createElement(p,fe({},r,{"data-slate-editor":!0,ref:this.ref,"data-key":v.key,contentEditable:!a||null,suppressContentEditableWarning:!0,className:o,autoCorrect:n.autoCorrect?"on":"off",spellCheck:u,style:k,role:a?null:c||"textbox",tabIndex:s,"data-gramm":!1}),b)}}]),n}(t.Component);Rt.propTypes={autoCorrect:ae.bool.isRequired,className:ae.string,editor:ae.object.isRequired,readOnly:ae.bool.isRequired,role:ae.string,spellCheck:ae.bool.isRequired,style:ae.object,tabIndex:ae.number,tagName:ae.string},Rt.defaultProps={style:{},tagName:"div"},ce.forEach(function(e){Rt.propTypes[e]=ae.func.isRequired});var At={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"},Pt=At.FRAGMENT,Ft=At.HTML,It=At.TEXT;function Bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.fragment,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=s(e.target),i=a.getSelection(),l=t.schema,f=t.selection,p=f.start,v=f.end,h=t.document.getClosestVoid(p.key,l),g=t.document.getClosestVoid(v.key,l);if(!i.isCollapsed||h){var m=u.serializeNode(n),y=i.getRangeAt(0),b=y.cloneContents(),k=b.childNodes[0];if(b.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(k=e)}),g){var w=y.cloneRange(),E=ft(g,a);w.setEndAfter(E),b=w.cloneContents()}if(h&&(k=b.childNodes[0].childNodes[1].firstChild),[].slice.call(b.querySelectorAll(gt)).forEach(function(e){var t="n"===e.getAttribute(ht);e.textContent=t?"\n":""}),3==k.nodeType){var C=a.document.createElement("span");C.style.whiteSpace="pre",C.appendChild(k),b.appendChild(C),k=C}k.setAttribute("data-slate-fragment",m);var S=o.Value.create({document:n}),x=d.serialize(S),O=a.document.createElement("div");O.appendChild(b),e.clipboardData&&e.clipboardData.setData&&!c.IS_IE&&(e.preventDefault(),e.clipboardData.setData(It,x),e.clipboardData.setData(Pt,m),e.clipboardData.setData(Ft,O.innerHTML),r());var T=e.target.closest("[data-slate-editor]");O.setAttribute("contenteditable",!0),O.style.position="absolute",O.style.left="-9999px",T.appendChild(O),i.selectAllChildren(O),a.requestAnimationFrame(function(){T.removeChild(O),Tt(i),i.addRange(y),r()})}}function jt(e,t){var n=e.closest("[data-key]");if(!n)return null;var r=n.getAttribute("data-key");return r&&t.document.getNode(r)||null}function _t(e,t){e.nativeEvent&&(e=e.nativeEvent);var n=e,r=n.x,o=n.y,a=n.target;if(null==r||null==o)return null;var i=t.document,c=t.schema,l=jt(a,t);if(!l)return null;if(c.isVoid(l)){var u=a.getBoundingClientRect(),d="inline"==l.object?r-u.left<u.left+u.width-r:o-u.top<u.top+u.height-o,f=l.getFirstText(),p=i.createRange();if(d){var v=i.getPreviousText(f.key);if(v)return p.moveToEndOfNode(v)}var h=i.getNextText(f.key);return h?p.moveToStartOfNode(h):null}var g=s(a),m=void 0;if(g.document.caretRangeFromPoint)m=g.document.caretRangeFromPoint(r,o);else if(g.document.caretPositionFromPoint){var y=g.document.caretPositionFromPoint(r,o);(m=g.document.createRange()).setStart(y.offsetNode,y.offset),m.setEnd(y.offsetNode,y.offset)}else if(g.document.body.createTextRange){m=g.document.body.createTextRange();try{m.moveToPoint(r,o)}catch(e){return null}}var b=Ct(m,t);return b||null}var Mt=At.FRAGMENT,Lt=At.HTML,qt=At.NODE,Vt=At.RICH,zt=At.TEXT,Ut=/ data-slate-fragment="([^\s"]+)"/;function Wt(e){!c.IS_IE&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=$t(t,Mt),r=$t(t,qt),o=$t(t,Lt),a=$t(t,Vt),i=$t(t,zt),s=void 0;if(!n&&o&&~o.indexOf(' data-slate-fragment="')){var l=Ut.exec(o),d=he(l,2),f=(d[0],d[1]);f&&(n=f)}if(i){var p=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!=t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(e){throw new Error("Unable to parse custom Slate drag event data.")}}(i);p[Mt]&&(n=p[Mt]),p[qt]&&(r=p[qt]),p[zt]&&(i=p[zt])}n&&(n=u.deserializeNode(n)),r&&(r=u.deserializeNode(r));try{t.items&&t.items.length?s=Array.from(t.items).map(function(e){return"file"==e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(s=Array.from(t.files))}catch(e){t.files&&t.files.length&&(s=Array.from(t.files))}var v={files:s,fragment:n,html:o,node:r,rich:a,text:i};return v.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(v),v}function $t(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t==zt&&e.getData("Text")||null}var Ht=At.TEXT;function Kt(e,t,n){var r=At[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(e){var a="SLATE-DATA-EMBED::",i=o.getData(Ht),s={};if(i.substring(0,a.length)===a)try{s=JSON.parse(i.substring(a.length))}catch(e){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else s[Ht]=i;s[r]=n;var c=""+a+JSON.stringify(s);o.setData(Ht,c)}}var Xt=G("slate:after");function Jt(){var e=null;return{onBeforeInput:function(e,t,n){if(Xt("onBeforeInput",{event:e}),e.nativeEvent)return e.preventDefault(),void t.insertText(e.data);var r=e.getTargetRanges(),o=he(r,1)[0];if(o){e.preventDefault();var a=t.value,i=a.document,s=a.selection,c=a.schema,l=Ct(o,a);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":return void t.deleteAtRange(l);case"deleteWordBackward":return void t.deleteWordBackwardAtRange(l);case"deleteWordForward":return void t.deleteWordForwardAtRange(l);case"deleteSoftLineBackward":case"deleteHardLineBackward":return void t.deleteLineBackwardAtRange(l);case"deleteSoftLineForward":case"deleteHardLineForward":return void t.deleteLineForwardAtRange(l);case"insertLineBreak":case"insertParagraph":return void(i.hasVoidParent(s.start.path,c)?t.moveToStartOfNextText():t.splitBlockAtRange(l));case"insertFromYank":case"insertReplacementText":case"insertText":var u=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==u)return;return t.insertTextAtRange(l,u,s.marks),void(s.marks&&a.document!=t.value.document&&t.select({marks:null}))}}},onBlur:function(e,t,n){Xt("onBlur",{event:e}),t.blur()},onClick:function(e,t,n){if(n.props.readOnly)return!0;var r=t.value,o=r.document,a=r.schema,i=jt(e.target,r),s=o.getAncestors(i.key);i&&(a.isVoid(i)||s.some(function(e){return a.isVoid(e)}))&&t.focus().moveToEndOfNode(i),Xt("onClick",{event:e})},onCopy:function(e,t,n){Xt("onCopy",{event:e}),Bt(e,t.value)},onCut:function(e,t,n){Xt("onCut",{event:e}),Bt(e,t.value,t.value.fragment,function(){var e=t.value,r=e.endBlock,o=e.endInline,a=e.selection,i=e.schema,s=a.isCollapsed,c=r&&i.isVoid(r)&&s,l=o&&i.isVoid(o)&&s;c?n.change(function(e){return e.removeNodeByKey(r.key)}):l?n.change(function(e){return e.removeNodeByKey(o.key)}):n.change(function(e){return e.delete()})})},onDragEnd:function(t,n,r){Xt("onDragEnd",{event:t}),e=null},onDragOver:function(e,t,n){Xt("onDragOver",{event:e})},onDragStart:function(t,n,r){Xt("onDragStart",{event:t}),e=!0;var o=n.value,a=o.document,i=o.schema,s=jt(t.target,o),c=a.getAncestors(s.key),l=s&&(i.isVoid(s)||c.some(function(e){return i.isVoid(e)})),d=o.blocks.some(function(e){return e.key===s.key});l&&!d&&n.moveToRangeOfNode(s);var f=n.value.fragment;Kt(t,"fragment",u.serializeNode(f))},onDrop:function(t,n,r){Xt("onDrop",{event:t});var o=n.value,a=o.document,i=o.selection,c=o.schema,l=s(t.target),u=_t(t,o);if(u){var d=Wt(t),f=d.type,p=d.fragment,v=d.text;if(n.focus(),e&&i.end.key==u.end.key&&i.end.offset<u.end.offset&&(u=u.moveForward(i.start.key==i.end.key?0-i.end.offset+i.start.offset:0-i.end.offset)),e&&n.delete(),n.select(u),"text"==f||"html"==f){var h=u.anchor,g=a.hasVoidParent(h.key,c);if(g){for(var m=a.getNode(h.key);g&&(m=a.getNextText(m.key));)g=a.hasVoidParent(m.key,c);m&&n.moveToStartOfNode(m)}v&&v.split("\n").forEach(function(e,t){t>0&&n.splitBlock(),n.insertText(e)})}"fragment"==f&&n.insertFragment(p);var y=ft(a.getNode(u.focus.key),l);y&&y.dispatchEvent(new MouseEvent("mouseup",{view:l,bubbles:!0,cancelable:!0}))}},onInput:function(e,t,n){Xt("onInput",{event:e});var r=s(e.target),o=t.value,a=r.getSelection().anchorNode,i=wt(a,0,o);if(i){var c=o.document,l=o.selection,u=c.getDescendant(i.key),d=c.getClosestBlock(u.key),f=u.getLeaves(),p=d.getLastText(),v=f.last(),h=0,g=0,m=f.find(function(e){if(h=g,(g+=e.text.length)>i.offset)return!0})||v,y=m.text,b=a.textContent,k=u==p,w=m==v,E=b.charAt(b.length-1);if(k&&w&&"\n"==E&&(b=b.slice(0,-1)),b!=y){var C=b.length-y.length,S=l.moveToEnd().moveForward(C),x=l.moveAnchorTo(i.key,h).moveFocusTo(i.key,g);x=c.resolveRange(x),t.insertTextAtRange(x,b,m.marks).select(S)}}},onKeyDown:function(e,t,n){Xt("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=r.schema,s=o.hasVoidParent(a.start.path,i);if(f.isSplitBlock(e)&&!c.IS_IOS)return s?t.moveToStartOfNextText():t.splitBlock();if(f.isDeleteBackward(e)&&!c.IS_IOS)return t.deleteCharBackward();if(f.isDeleteForward(e)&&!c.IS_IOS)return t.deleteCharForward();if(f.isDeleteLineBackward(e))return t.deleteLineBackward();if(f.isDeleteLineForward(e))return t.deleteLineForward();if(f.isDeleteWordBackward(e))return t.deleteWordBackward();if(f.isDeleteWordForward(e))return t.deleteWordForward();if(f.isRedo(e))return t.redo();if(f.isUndo(e))return t.undo();if(f.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(f.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(f.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(f.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(f.isMoveBackward(e)){var l=r.previousText,u=r.startText,d=l&&o.hasVoidParent(l.key,i);if(s||d||""==u.text)return e.preventDefault(),t.moveBackward()}if(f.isMoveForward(e)){var p=r.nextText,v=r.startText,h=p&&o.hasVoidParent(p.key,i);if(s||h||""==v.text)return e.preventDefault(),t.moveForward()}if(f.isExtendBackward(e)){var g=r.previousText,m=r.startText,y=g&&o.hasVoidParent(g.key,i);if(s||y||""==m.text)return e.preventDefault(),t.moveFocusBackward()}if(f.isExtendForward(e)){var b=r.nextText,k=r.startText,w=b&&o.hasVoidParent(b.key,i);if(s||w||""==k.text)return e.preventDefault(),t.moveFocusForward()}},onPaste:function(e,t,n){Xt("onPaste",{event:e});var r=Wt(e),o=r.type,a=r.fragment,i=r.text;if("fragment"==o&&t.insertFragment(a),"text"==o||"html"==o){if(!i)return;var s=t.value,c=s.document,l=s.selection,u=s.startBlock;if(s.schema.isVoid(u))return;var f=u,p=c.getInsertMarksAtRange(l),v=d.deserialize(i,{defaultBlock:f,defaultMarks:p}).document;t.insertFragment(v)}},onSelect:function(e,t,n){Xt("onSelect",{event:e});var r=s(e.target),o=t.value,a=o.document,i=o.schema,c=r.getSelection();if(c.rangeCount){var l=Ct(c,o);if(l){var u=l,d=u.anchor,f=u.focus,p=a.getNode(d.key),v=a.getNode(f.key),h=a.getClosestInline(d.key),g=a.getClosestInline(f.key),m=a.getClosestBlock(f.key),y=a.getClosestBlock(d.key);if(y&&!i.isVoid(y)&&0==d.offset&&m&&i.isVoid(m)&&0!=f.offset&&(l=l.setFocus(f.setOffset(0))),h&&!i.isVoid(h)&&d.offset==p.text.length){var b=a.getClosestBlock(d.key).getNextText(d.key);b&&(l=l.moveAnchorTo(b.key,0))}if(g&&!i.isVoid(g)&&f.offset==v.text.length){var k=a.getClosestBlock(f.key).getNextText(f.key);k&&(l=l.moveFocusTo(k.key,0))}var w=a.createSelection(l);w=(w=w.setIsFocused(!0)).set("marks",o.selection.marks),t.select(w)}}else t.blur()},renderEditor:function(e,n){var r=n.handlers;return t.createElement(Rt,fe({},r,{autoCorrect:e.autoCorrect,className:e.className,editor:n,readOnly:e.readOnly,role:e.role,spellCheck:e.spellCheck,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName}))},renderNode:function(e){var n=e.attributes,r=e.children,o=e.node;if("block"==o.object||"inline"==o.object){var a="block"==o.object?"div":"span";return t.createElement(a,fe({},n,{style:{position:"relative"}}),r)}},renderPlaceholder:function(e){var n=e.editor,r=e.node;if(n.props.placeholder&&!n.state.isComposing&&"block"==r.object&&o.Text.isTextList(r.nodes)&&""==r.text&&!(n.value.document.getBlocks().size>1))return t.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"}},n.props.placeholder)}}}var Gt=G("slate:before");function Yt(){var e=null,t=0,n=!1,r=!1,o=!1;return{onBeforeInput:function(e,t,n){return!!n.props.readOnly||!(!e.nativeEvent||!c.HAS_INPUT_EVENTS_LEVEL_2)||void Gt("onBeforeInput",{event:e})},onBlur:function(t,n,o){if(r)return!0;if(o.props.readOnly)return!0;var a=n.value,i=a.schema,c=t.relatedTarget,l=t.target,u=s(l);if(e==u.document.activeElement)return!0;if(c){var d=p.findDOMNode(o);if(c==d)return!0;if(c.hasAttribute("data-slate-spacer"))return!0;var f=jt(c,a);if(d.contains(c)&&f&&!i.isVoid(f))return!0}Gt("onBlur",{event:t})},onChange:function(e,t){e.value.schema!=t.schema&&e.withoutSaving(function(){e.setValue({schema:t.schema}).normalize()}),Gt("onChange")},onCompositionEnd:function(e,r,o){var a=t;window.requestAnimationFrame(function(){t>a||(n=!1,o.state.isComposing&&o.setState({isComposing:!1}))}),Gt("onCompositionEnd",{event:e})},onCompositionStart:function(e,r,o){n=!0,t++,o.state.isComposing||o.setState({isComposing:!0}),Gt("onCompositionStart",{event:e})},onCopy:function(e,t,n){var o=s(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),Gt("onCopy",{event:e})},onCut:function(e,t,n){if(n.props.readOnly)return!0;var o=s(e.target);r=!0,o.requestAnimationFrame(function(){return r=!1}),Gt("onCut",{event:e})},onDragEnd:function(e,t,n){o=!1,Gt("onDragEnd",{event:e})},onDragEnter:function(e,t,n){Gt("onDragEnter",{event:e})},onDragExit:function(e,t,n){Gt("onDragExit",{event:e})},onDragLeave:function(e,t,n){Gt("onDragLeave",{event:e})},onDragOver:function(e,t,n){var r=n.value.schema,a=jt(e.target,n.value);r.isVoid(a)&&e.preventDefault(),c.IS_IE&&e.preventDefault(),o||(o=!0,c.IS_IE||(e.nativeEvent.dataTransfer.dropEffect="move")),Gt("onDragOver",{event:e})},onDragStart:function(e,t,n){o=!0,Gt("onDragStart",{event:e})},onDrop:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),Gt("onDrop",{event:e})},onFocus:function(t,n,o){if(r)return!0;if(o.props.readOnly)return!0;var a=p.findDOMNode(o),i=s(t.target);if(e=i.document.activeElement,c.IS_FIREFOX&&t.target!=a)return a.focus(),!0;Gt("onFocus",{event:t})},onInput:function(e,t,r){return!!n||!!t.value.selection.isBlurred||void Gt("onInput",{event:e})},onKeyDown:function(e,t,r){return!!r.props.readOnly||(n?(f.isCompose(e)&&e.preventDefault(),!0):(!c.IS_IOS&&(f.isBold(e)||f.isDeleteBackward(e)||f.isDeleteForward(e)||f.isDeleteLineBackward(e)||f.isDeleteLineForward(e)||f.isDeleteWordBackward(e)||f.isDeleteWordForward(e)||f.isItalic(e)||f.isRedo(e)||f.isSplitBlock(e)||f.isTransposeCharacter(e)||f.isUndo(e))&&e.preventDefault(),void Gt("onKeyDown",{event:e})))},onPaste:function(e,t,n){if(n.props.readOnly)return!0;e.preventDefault(),Gt("onPaste",{event:e})},onSelect:function(t,o,a){if(r)return!0;if(n)return!0;if(a.props.readOnly)return!0;var i=s(t.target);e=i.document.activeElement,Gt("onSelect",{event:t})}}}var Zt=G("slate:editor"),Qt=function(e){function t(){var e,n,r;le(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=ve(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),en.call(r),ve(r,n)}return pe(t,e),ue(t,[{key:"componentDidMount",value:function(){this.tmp.updates++;var e=this.props.autoFocus,t=this.tmp.change;e&&(t?t.focus():this.focus()),t&&this.onChange(t)}},{key:"componentDidUpdate",value:function(e){this.tmp.updates++;var t=this.tmp,n=t.change,r=t.resolves,o=t.updates;i(r<5||r!==o,"A Slate <Editor> component is re-resolving `props.plugins` or `props.schema` on each update, which leads to poor performance. This is often due to passing in a new `schema` or `plugins` prop with each render by declaring them inline in your render function. Do not do this!"),n&&this.onChange(n)}},{key:"render",value:function(){Zt("render",this);var e=fe({},this.props);return this.stack.render("renderEditor",e,this)}},{key:"plugins",get:function(){return this.resolvePlugins(this.props.plugins,this.props.schema)}},{key:"schema",get:function(){return this.resolveSchema(this.plugins)}},{key:"stack",get:function(){return this.resolveStack(this.plugins)}},{key:"value",get:function(){return this.plugins===this.tmp.plugins&&this.props.value===this.tmp.value?this.tmp.value:this.resolveValue(this.plugins,this.props.value)}}]),t}(t.Component);Qt.propTypes={autoCorrect:ae.bool,autoFocus:ae.bool,className:ae.string,onChange:ae.func,placeholder:ae.any,plugins:ae.array,readOnly:ae.bool,role:ae.string,schema:ae.object,spellCheck:ae.bool,style:ae.object,tabIndex:ae.number,value:n.value.isRequired},Qt.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},plugins:[],readOnly:!1,schema:{},spellCheck:!0};var en=function(){var e=this;this.state={},this.tmp={change:null,isChanging:!1,operationsSize:null,plugins:null,resolves:0,updates:0,value:null},this.handlers=ce.reduce(function(t,n){return t[n]=function(t){return e.onEvent(n,t)},t},{}),this.change=function(){if(e.tmp.isChanging)i(!1,"The `editor.change` method was called from within an existing `editor.change` callback. This is not allowed, and often due to calling `editor.change` directly from a plugin's event handler which is unnecessary.");else{var t=e.value.change();try{e.tmp.isChanging=!0,t.call.apply(t,arguments)}catch(e){throw e}finally{e.tmp.isChanging=!1}e.onChange(t)}},this.blur=function(){e.change(function(e){return e.blur()})},this.focus=function(){e.change(function(e){return e.focus()})},this.onChange=function(t){0!==t.operations.size&&(Zt("onChange",{change:t}),t=e.resolveChange(e.plugins,t,t.operations.size),e.tmp.value=t.value,e.tmp.plugins=e.plugins,delete e.tmp.change,delete e.tmp.operationsSize,e.props.onChange(t))},this.onEvent=function(t,n){e.change(function(r){e.stack.run(t,n,r,e)})},this.resolveChange=se(function(t,n,r){return e.resolveStack(t).run("onChange",n,e),n}),this.resolvePlugins=se(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Zt("resolvePlugins",{plugins:t,schema:n}),e.tmp.resolves++;var r=Yt(),o=Jt(),a={schema:n},i=function(t){return"onChange"==t?"continue":"schema"==t?"continue":void(a[t]=function(){var n;return e.props[t]&&(n=e.props)[t].apply(n,arguments)})},s=!0,c=!1,l=void 0;try{for(var u,d=me[Symbol.iterator]();!(s=(u=d.next()).done);s=!0)i(u.value)}catch(e){c=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw l}}return[r,a].concat(ge(t),[o])}),this.resolveSchema=se(function(e){return Zt("resolveSchema",{plugins:e}),o.Schema.create({plugins:e})}),this.resolveStack=se(function(e){return Zt("resolveStack",{plugins:e}),o.Stack.create({plugins:e})}),this.resolveValue=se(function(t,n){Zt("resolveValue",{plugins:t,value:n});var r=n.change();return r=e.resolveChange(t,r,r.operations.size),e.tmp.change=r,e.tmp.operationsSize=r.operations.size,r.value})},tn=!0,nn=!1,rn=void 0;try{for(var on,an=ce[Symbol.iterator]();!(tn=(on=an.next()).done);tn=!0){var sn=on.value;Qt.propTypes[sn]=ae.func}}catch(e){nn=!0,rn=e}finally{try{!tn&&an.return&&an.return()}finally{if(nn)throw rn}}var cn={Editor:Qt,cloneFragment:Bt,findDOMNode:ft,findDOMRange:vt,findNode:jt,findRange:Ct,getEventRange:_t,getEventTransfer:Wt,setEventTransfer:Kt,AfterPlugin:Jt,BeforePlugin:Yt};e.Editor=Qt,e.cloneFragment=Bt,e.findDOMNode=ft,e.findDOMRange=vt,e.findNode=jt,e.findRange=Ct,e.getEventRange=_t,e.getEventTransfer=Wt,e.setEventTransfer=Kt,e.AfterPlugin=Jt,e.BeforePlugin=Yt,e.default=cn,Object.defineProperty(e,"__esModule",{value:!0})});
